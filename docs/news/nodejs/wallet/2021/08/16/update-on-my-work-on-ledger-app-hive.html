<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="og:image" content="/assets/images/sticker.png" /><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Update on my work on Ledger App Hive | Hive Chain Documentation</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="Update on my work on Ledger App Hive" />
<meta name="author" content="engrave" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="I’m continuing my work on Ledger App Hive and I am pretty confident it will be finished and submitted for official review soon." />
<meta property="og:description" content="I’m continuing my work on Ledger App Hive and I am pretty confident it will be finished and submitted for official review soon." />
<link rel="canonical" href="https://peakd.com/hive-139531/@engrave/update-on-my-work-on-ledger-app-hive" />
<meta property="og:url" content="https://peakd.com/hive-139531/@engrave/update-on-my-work-on-ledger-app-hive" />
<meta property="og:site_name" content="Hive Chain Documentation" />
<meta property="og:image" content="https://files.peakd.com/file/peakd-hive/engrave/Eo23B9HfFGSxgkzJckVtC8WSMeoEwfMcitDDJBZYJzaiVGqirgAwMZmEHpr2WcufBP6.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-08-16T16:12:51-07:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://files.peakd.com/file/peakd-hive/engrave/Eo23B9HfFGSxgkzJckVtC8WSMeoEwfMcitDDJBZYJzaiVGqirgAwMZmEHpr2WcufBP6.png" />
<meta property="twitter:title" content="Update on my work on Ledger App Hive" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"engrave"},"dateModified":"2021-08-16T16:12:51-07:00","datePublished":"2021-08-16T16:12:51-07:00","description":"I’m continuing my work on Ledger App Hive and I am pretty confident it will be finished and submitted for official review soon.","headline":"Update on my work on Ledger App Hive","image":"https://files.peakd.com/file/peakd-hive/engrave/Eo23B9HfFGSxgkzJckVtC8WSMeoEwfMcitDDJBZYJzaiVGqirgAwMZmEHpr2WcufBP6.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://peakd.com/hive-139531/@engrave/update-on-my-work-on-ledger-app-hive"},"url":"https://peakd.com/hive-139531/@engrave/update-on-my-work-on-ledger-app-hive"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://hivedocs.info/feed.xml" title="Hive Chain Documentation" /><script>
if(!(window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1")) {
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-161692811-1', 'auto');
  ga('send', 'pageview');
}
</script>
  
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
  
  <!-- jQuery Modal -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.css" />
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/turbolinks/5.2.0/turbolinks.js" integrity="sha256-iM4Yzi/zLj/IshPWMC1IluRxTtRjMqjPGd97TZ9yYpU=" crossorigin="anonymous"></script>
  <script src='https://unpkg.com/steem-content-renderer'></script>
  <script>
    (function () {
      if (Turbolinks.supported) {
        Turbolinks.setProgressBarDelay(500);
      }
    })();
  </script>
  <script src="/assets/javascript/universal-bridge-against-phishing.js"></script>
  <script src="/assets/javascript/lazysizes.min.js" async=""></script>
  <link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Cousine|Inconsolata" rel="stylesheet">
  <link rel="shortcut icon" type="image/png" href="/assets/images/favicon.png">
</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Hive Chain Documentation</a>

      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/news/">News</a><a class="page-link" href="/howto/">How To</a><a class="page-link" href="/links/">Useful Links</a><a class="page-link" href="/authors/">Authors</a><!-- HTML elements for search -->
          <input type="text" id="search-input" placeholder="Search" />
          
          <ul id="results-container"></ul>

          <script src="/assets/javascript/search.js"></script>
          <script>
            var sjs = SimpleJekyllSearch({
              searchInput: document.getElementById('search-input'),
              resultsContainer: document.getElementById('results-container'),
              json: '/search.json'
            })
          </script>
          <!-- <form style="float: right;" class="form-inline" method="get" action="http://www.google.com/search">
            <input type="hidden" name="sitesearch" value="hivedocs.info" />
            <input type="text" name="q" maxlength="255" placeholder="Search" />
          </form> -->
          
          <!-- <a href="#" onclick="try { $('#authors-container').slideToggle(); } catch { document.getElementById('authors-container').style.display = 'block'; }; return false;">Authors &#187;</a>
          <a href="#" onclick="try { $('#topics-container').slideToggle(); } catch { document.getElementById('topics-container').style.display = 'block'; }; return false;">Topics &#187;</a> -->
          
          <a href="#topics-container" rel="modal:open">Topics &#187;</a>
          
          <div id="topics-container" class="modal">
            <h3>Topics</h3>
            <ul><li><a class="page-link" href="/account-recovery/"><nobr>Account Recovery</nobr></a></li><li><a class="page-link" href="/core-development/"><nobr>Core Development</nobr></a></li><li><a class="page-link" href="/dapps/"><nobr>Dapps</nobr></a></li><li><a class="page-link" href="/docker/"><nobr>Docker</nobr></a></li><li><a class="page-link" href="/hardfork/"><nobr>Hardfork</nobr></a></li><li><a class="page-link" href="/hivemind/"><nobr>Hivemind</nobr></a></li><li><a class="page-link" href="/javascript/"><nobr>Javascript</nobr></a></li><li><a class="page-link" href="/multisig/"><nobr>Multisig</nobr></a></li><li><a class="page-link" href="/python/"><nobr>Python</nobr></a></li><li><a class="page-link" href="/ruby/"><nobr>Ruby</nobr></a></li><li><a class="page-link" href="/testnet/"><nobr>Testnet</nobr></a></li><li><a class="page-link" href="/tools/"><nobr>Tools</nobr></a></li><li><a class="page-link" href="/witness/"><nobr>Witness</nobr></a></li></ul>
          </div>
        </div>
      </nav>
  </div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <div class="pull-right well">
      <img src="https://images.hive.blog/u/engrave/avatar" width="128" height="128" class="lazyload" />
    </div>
    
    <h1 class="post-title p-name" itemprop="name headline">Update on my work on Ledger App Hive</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2021-08-16T16:12:51-07:00" itemprop="datePublished">Aug 16, 2021
      </time>• <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">
          <a href="/authors/#author-engrave">engrave</a>
        </span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <div id="content-engrave-update-on-my-work-on-ledger-app-hive">![image.png](https://files.peakd.com/file/peakd-hive/engrave/Eo23B9HfFGSxgkzJckVtC8WSMeoEwfMcitDDJBZYJzaiVGqirgAwMZmEHpr2WcufBP6.png)
<sup>Image credit (@thepeakstudio)</sup>

I'm continuing my work on Ledger App Hive and I am pretty confident it will be finished and submitted for official review soon.

Previous posts regarding Ledger app:
 * [Ledger App updated with HF25 operations](https://peakd.com/hive-139531/@engrave/ledger-app-updated-with-hf25-operations)
 * [JavaScript library for Ledger Nano S HIVE application
](https://peakd.com/hive-139531/@engrave/javascript-library-for-ledger-nano-s-hive-application)

# Source code

I decided to rewrite the app from scratch. The old codebase was a bit messy and it would be really hard to work on it. Sometimes it's just easier to start from scratch. I only adopted the ASN1 DER encoding, proposed by netuoso for communication between Ledger device and PC/mobile.

It's basically finished. The new codebase is built on top of the latest boilerplate (provided by Ledger) and utilizes their newest SDK. Thanks to this, I was able to write the code in a way that will work  on both Nano S and Nano X the same way (except for the fact that Nano X has a bigger display). 

**The new codebase compiles with 0 warnings and produces 0 bugs when tested with Clang Static Analyzer.** This is the requirement that needs to be met before submitting the app for official review.


```
make[1]: Leaving directory '/app'
scan-build: Removing directory '/app/output-scan-build/2021-08-16-224415-44-1' because it contains no reports.
scan-build: No bugs found.
```

# New user experience

New SDK allowed me to redesign the user experience. Now, you can loop through the entire transaction back and forward. The previous version allowed you to verify every transaction field only once and it was really easy to accept or reject the transaction by mistake. Ledger has also some functional/design requirements and the new version follows them.

And, as I already said, it's working on Nano X.
![Screenshot from 2021-08-17 00-39-42.png](https://files.peakd.com/file/peakd-hive/engrave/2424EvTL2WpTu7G3Fo1vV9Luv4gmvGNKXsSvoNZL4ChqCZQdfmHGUAWPLjEwNVPyZiSWw.png)

This is a view from the simulator because there is no way to sideload the unofficial app to Nano X.

# Unit tests

During the last two weeks, I put a lot of effort into unit testing the app (which is not only required by Ledger company but also very useful in the matter of stability and security). I covered most of my files with unit tests written in ANSI C, using `cmocka` framework. This will minimize potential problems, like buffer overflows/underflows etc which are really common on apps written in C.

![Screenshot from 2021-08-16 22-24-29.png](https://files.peakd.com/file/peakd-hive/engrave/23xLHzRhhbDYMswqNRr1ZJR4dT63qmLwWs6kMEnQ2YWkCnWQszYTbeBtNoq5JdyWYo3tV.png)

# Functional tests

Those need to be done yet, but I already prepared a Javascript library that is fully featured and can be used not only to communicate with the physical device but also with the simulator/debugger. The next step will be to create automated tests, to verify signatures for specified test transactions.

I'm already using it to broadcast transactions to our testnet. It shouldn't take long to finish this part.

![Screenshot from 2021-08-17 01-04-32.png](https://files.peakd.com/file/peakd-hive/engrave/Eo1vSpgX1pPc2PQ9xhLCuAa6rT1ZygYkijdBtEbyPnA6pjWm7ueHcR2mqdGezfTyKHn.png)

# Progress since the last update

 * ~~Make it compatible with a new SDK and 2.0 firmware version~~
 * ~~Make it working on both Nano S and Nano X devices~~
 * ~~Add Approve and Reject screens before signing the transaction~~
 * Prepare user guide and developer's documentation for Ledger Team
 * Develop a working version of the Hive companion app
 * Submit the app for the official review

We're close.

***

Follow me to be up to date with incoming development updates!

***

<center>

**Click on the image to vote for @engrave witness:**

[![banner_engrave 100.png](https://images.hive.blog/DQmUghvic5TCPPvVkB4iB7eXmgQ3RQ4L8jkVizvuCBW8RMT/banner_engrave%20100.png)](https://hivesigner.com/sign/account-witness-vote?witness=engrave&amp;approve=1)


</center></div>
<script crossorigin="anonymous" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>

<script src="https://unpkg.com/steem-content-renderer"></script>

<!-- <script src="https://cdn.jsdelivr.net/npm/hive-content-renderer/dist/hive-content-renderer.min.js"></script> -->
<script>
  $(document).ready(function() {
    try {
      const renderer = new SteemContentRenderer.DefaultRenderer({
      // const renderer = new HiveContentRenderer({
        baseUrl: "https://hive.blog/",
        breaks: true,
        skipSanitization: false,
        allowInsecureScriptTags: false,
        addNofollowToLinks: true,
        doNotShowImages: false,
        ipfsPrefix: "",
        assetsWidth: 640,
        assetsHeight: 480,
        imageProxyFn: (url) => url,
        usertagUrlFn: (account) => "/@engrave",
        hashtagUrlFn: (hashtag) => "/update-on-my-work-on-ledger-app-hive",
        isLinkSafeFn: (url) => true,
      });
      
      const inputElem = $('#content-engrave-update-on-my-work-on-ledger-app-hive').html();
      const outputElem = $('#content-engrave-update-on-my-work-on-ledger-app-hive');
      const output = renderer.render(inputElem);
      
      outputElem.html(output);
    } catch(e) {
      console.log(e);
    }
  });
</script>

<style>
  #content-engrave-update-on-my-work-on-ledger-app-hive {
    padding: 0 3rem;
    color: #444444;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    font-size: 16px;
    line-height: 1.8;
    text-shadow: 0 1px 0 #ffffff;
    padding: 0.5rem;
  }
  #content-engrave-update-on-my-work-on-ledger-app-hive code {
    background: white;
  }
  #content-engrave-update-on-my-work-on-ledger-app-hive a {
    border-bottom: 1px solid #444444; color: #444444; text-decoration: none;
  }
  #content-engrave-update-on-my-work-on-ledger-app-hive a:hover {
    border-bottom: 0;
  }
  #content-engrave-update-on-my-work-on-ledger-app-hive h1 {
    font-size: 2.2em;
  }
  #content-engrave-update-on-my-work-on-ledger-app-hive h2, h3, h4, h5 {
    margin-bottom: 0;
  }
  #content-engrave-update-on-my-work-on-ledger-app-hive header small {
    color: #999;
    font-size: 50%;
  }
  #content-engrave-update-on-my-work-on-ledger-app-hive img {
    max-width: 100%;
  }
</style>

<hr />

<p>
  See: <a href="https://peakd.com/hive-139531/@engrave/update-on-my-work-on-ledger-app-hive">Update on my work on Ledger App Hive</a>
  by
  <a href="https://hive.blog/@engrave">@engrave</a>
</p>


  </div><a class="u-url" href="/news/nodejs/wallet/2021/08/16/update-on-my-work-on-ledger-app-hive.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading"><a rel="author" href="/">Hive Chain Documentation</a></h2>
    
    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">site curated by: @inertia</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Your resource for various levels of Hive Documentation.</p>
      </div>
    </div>
  </div>

</footer>
</body>

</html>
