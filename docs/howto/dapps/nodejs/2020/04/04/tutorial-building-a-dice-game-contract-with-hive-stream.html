<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="og:image" content="/assets/images/sticker.png" /><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Tutorial: Building A Dice Game Contract With Hive Stream | Hive Chain Documentation</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Tutorial: Building A Dice Game Contract With Hive Stream" />
<meta name="author" content="beggars" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Hot off the heels of announcing [some huge updates](https://peakd.com/hive-139531/@beggars/hive-stream-update-support-for-writing-custom-contracts-on-the-hive-blockchain) to Hive Stream which features the ability to write &quot;smart&quot; contracts, I promised a tutorial would be coming showing you how to write one and what could be more fitting than writing a contract for a dice game? Basing this off of the dice contract that Hive Engine ships with as an example, I&#39;ve created a contract that accepts a roll value which needs to be above the server roll. By the end of this tutorial, you&#39;ll have an understanding of how contracts are written (they&#39;re just classes) and how you can create your own smart dApps using them. If you&#39;re the kind of person who just wants to see the code, I have you covered. The code for the dice smart contract can be found [here](https://github.com/Vheissu/hive-stream/blob/master/src/contracts/dice.contract.ts). It is written in TypeScript but resembles Javascript basically if you&#39;re not familiar. This contract is based off of the dice contract in Hive Engine, except they&#39;re both fundamentally different in how they&#39;re pieced together. ## Install the Hive Stream package In your application, install the `hive-stream` package by running `npm install hive-stream` it&#39;s a published package on Npm. We also want to install seedrandom and bignumber.js as well since those are used in our contract code. ``` npm install seedrandom bignumber.js ``` ## Writing the contract Save the following as `dice.contract.js` in your application. ```javascript import { Streamer, Utils } from &#39;hive-stream&#39;; import seedrandom from &#39;seedrandom&#39;; import BigNumber from &#39;bignumber.js&#39;; const CONTRACT_NAME = &#39;hivedice&#39;; const ACCOUNT = &#39;&#39;; // Replace with the account const TOKEN_SYMBOL = &#39;HIVE&#39;; const HOUSE_EDGE = 0.05; const MIN_BET = 1; const MAX_BET = 10; // Random Number Generator const rng = (previousBlockId, blockId, transactionId) =&gt; { const random = seedrandom(`${previousBlockId}${blockId}${transactionId}`).double(); const randomRoll = Math.floor(random * 100) + 1; return randomRoll; }; // Valid betting currencies const VALID_CURRENCIES = [&#39;HIVE&#39;]; class DiceContract { client; config; blockNumber; blockId; previousBlockId; transactionId; create() { // Runs every time register is called on this contract // Do setup logic and code in here (creating a database, etc) } destroy() { // Runs every time unregister is run for this contract // Close database connections, write to a database with state, etc } // Updates the contract with information about the current block // This is a method automatically called if it exists updateBlockInfo(blockNumber, blockId, previousBlockId, transactionId) { // Lifecycle method which sets block info this.blockNumber = blockNumber; this.blockId = blockId; this.previousBlockId = previousBlockId; this.transactionId = transactionId; } /** * Get Balance * * Helper method for getting the contract account balance. In the case of our dice contract * we want to make sure the account has enough money to pay out any bets * * @returns number */ async getBalance() { const account = await this._client.database.getAccounts([ACCOUNT]); if (account?.[0]) { const balance = (account[0].balance as string).split(&#39; &#39;); const amount = balance[0]; return parseFloat(amount); } } /** * Roll * * Automatically called when a custom JSON action matches the following method * * @param payload * @param param1 - sender and amount */ async roll(payload, { sender, amount }) { // Destructure the values from the payload const { roll } = payload; // The amount is formatted like 100 HIVE // The value is the first part, the currency symbol is the second const amountTrim = amount.split(&#39; &#39;); // Parse the numeric value as a real value const amountParsed = parseFloat(amountTrim[0]); // Format the amount to 3 decimal places const amountFormatted = parseFloat(amountTrim[0]).toFixed(3); // Trim any space from the currency symbol const amountCurrency = amountTrim[1].trim(); console.log(`Roll: ${roll} Amount parsed: ${amountParsed} Amount formatted: ${amountFormatted} Currency: ${amountCurrency}`); // Get the transaction from the blockchain const transaction = await Utils.getTransaction(this._client, this.blockNumber, this.transactionId); // Call the verifyTransfer method to confirm the transfer happened const verify = await Utils.verifyTransfer(transaction, sender, &#39;beggars&#39;, amount); // Get the balance of our contract account const balance = await this.getBalance(); // Transfer is valid if (verify) { // Server balance is less than the max bet, cancel and refund if (balance &lt; MAX_BET) { // Send back what was sent, the server is broke await Utils.transferHiveTokens(this._client, this._config, ACCOUNT, sender, amountTrim[0], amountTrim[1], `[Refund] The server could not fufill your bet.`); return; } // Bet amount is valid if (amountParsed &gt;= MIN_BET &amp;&amp; amountParsed &lt;= MAX_BET) { // Validate roll is valid if ((roll &gt;= 2 &amp;&amp; roll &lt;= 96) &amp;&amp; (direction === &#39;lesserThan&#39; || direction === &#39;greaterThan&#39;) &amp;&amp; VALID_CURRENCIES.includes(amountCurrency)) { // Roll a random value const random = rng(this.previousBlockId, this.blockId, this.transactionId); // Calculate the multiplier percentage const multiplier = new BigNumber(1).minus(HOUSE_EDGE).multipliedBy(100).dividedBy(roll); // Calculate the number of tokens won const tokensWon = new BigNumber(amountParsed).multipliedBy(multiplier).toFixed(3, BigNumber.ROUND_DOWN); // Memo that shows in users memo when they win const winningMemo = `You won ${tokensWon} ${TOKEN_SYMBOL}. Roll: ${random}, Your guess: ${roll}`; // Memo that shows in users memo when they lose const losingMemo = `You lost ${amountParsed} ${TOKEN_SYMBOL}. Roll: ${random}, Your guess: ${roll}`; // User won more than the server can afford, refund the bet amount if (parseFloat(tokensWon) &gt; balance) { await Utils.transferHiveTokens(this._client, this._config, ACCOUNT, sender, amountTrim[0], amountTrim[1], `[Refund] The server could not fufill your bet.`); return; } // If random value is less than roll if (random &lt; roll) { await Utils.transferHiveTokens(this._client, this._config, ACCOUNT, sender, tokensWon, TOKEN_SYMBOL, winningMemo); } else { await Utils.transferHiveTokens(this._client, this._config, ACCOUNT, sender, &#39;0.001&#39;, TOKEN_SYMBOL, losingMemo); } } else { // Invalid bet parameters, refund the user their bet await Utils.transferHiveTokens(this._client, this._config, ACCOUNT, sender, amountTrim[0], amountTrim[1], `[Refund] Invalid bet params.`); } } else { try { // We need to refund the user const transfer = await Utils.transferHiveTokens(this._client, this._config, ACCOUNT, sender, amountTrim[0], amountTrim[1], `[Refund] You sent an invalid bet amount.`); console.log(transfer); } catch (e) { console.log(e); } } } } } export default new DiceContract(); ``` ## Adding it to your application Create a file called `app.js` and add in the following. ```javascript import { Streamer } from &#39;hive-stream&#39;; import DiceContract from &#39;./dice.contract&#39;; const streamer = new Streamer({ ACTIVE_KEY: &#39;&#39;, // Needed for transfers JSON_ID: &#39;testdice&#39; // Identifier in the custom JSON payloads }); // Register the contract streamer.registerContract(&#39;hivedice&#39;, DiceContract); // Starts the streamer watching the blockchain streamer.start(); ``` ## Test it out In the contract code, put in your Hive username as the account and then transfer some Hive tokens to your own account (to you from you). Make sure you also supply your active key in the streamer constructor call in the above code (between the single quotes). In the memo field, enter stringified JSON like this: ``{&quot;hiveContract&quot;:{&quot;id&quot;:&quot;testdice&quot;, &quot;name&quot;:&quot;hivedice&quot;,&quot;action&quot;:&quot;roll&quot;,&quot;payload&quot;:{&quot;roll&quot;:10 }}}`` The ID in the memo must match what is provided to the config property `JSON_ID` this is what it uses to match transactions. In this case, it is `testdice` as the ID. The value `name` must match the value of the `registerContract` method&#39;s first argument value which is `hivedice` in our example. The `action` property matches the function name in the contract and finally the `payload` object is the data provided to the function call. I took the liberty of testing it out using my own account, to show you how the transfer for testing process works. ![transfer.PNG](https://files.peakd.com/file/peakd-hive/beggars/am5ZNZEA-transfer.PNG) As you can see from my two transactions showing the winning and losing, it works (which can be verified by checking my transactions on my wallet or blockchain explorer): ![transactions.PNG](https://files.peakd.com/file/peakd-hive/beggars/HnyJ7w4d-transactions.PNG) ## Conclusion This is just a rudimentary example of a basic dice contract. Some improvements might include support for direction as well as different odds, supporting different tokens and more. But, hopefully you can see what you can build with Hive Stream now. See: Tutorial: Building A Dice Game Contract With Hive Stream by @beggars" />
<meta property="og:description" content="Hot off the heels of announcing [some huge updates](https://peakd.com/hive-139531/@beggars/hive-stream-update-support-for-writing-custom-contracts-on-the-hive-blockchain) to Hive Stream which features the ability to write &quot;smart&quot; contracts, I promised a tutorial would be coming showing you how to write one and what could be more fitting than writing a contract for a dice game? Basing this off of the dice contract that Hive Engine ships with as an example, I&#39;ve created a contract that accepts a roll value which needs to be above the server roll. By the end of this tutorial, you&#39;ll have an understanding of how contracts are written (they&#39;re just classes) and how you can create your own smart dApps using them. If you&#39;re the kind of person who just wants to see the code, I have you covered. The code for the dice smart contract can be found [here](https://github.com/Vheissu/hive-stream/blob/master/src/contracts/dice.contract.ts). It is written in TypeScript but resembles Javascript basically if you&#39;re not familiar. This contract is based off of the dice contract in Hive Engine, except they&#39;re both fundamentally different in how they&#39;re pieced together. ## Install the Hive Stream package In your application, install the `hive-stream` package by running `npm install hive-stream` it&#39;s a published package on Npm. We also want to install seedrandom and bignumber.js as well since those are used in our contract code. ``` npm install seedrandom bignumber.js ``` ## Writing the contract Save the following as `dice.contract.js` in your application. ```javascript import { Streamer, Utils } from &#39;hive-stream&#39;; import seedrandom from &#39;seedrandom&#39;; import BigNumber from &#39;bignumber.js&#39;; const CONTRACT_NAME = &#39;hivedice&#39;; const ACCOUNT = &#39;&#39;; // Replace with the account const TOKEN_SYMBOL = &#39;HIVE&#39;; const HOUSE_EDGE = 0.05; const MIN_BET = 1; const MAX_BET = 10; // Random Number Generator const rng = (previousBlockId, blockId, transactionId) =&gt; { const random = seedrandom(`${previousBlockId}${blockId}${transactionId}`).double(); const randomRoll = Math.floor(random * 100) + 1; return randomRoll; }; // Valid betting currencies const VALID_CURRENCIES = [&#39;HIVE&#39;]; class DiceContract { client; config; blockNumber; blockId; previousBlockId; transactionId; create() { // Runs every time register is called on this contract // Do setup logic and code in here (creating a database, etc) } destroy() { // Runs every time unregister is run for this contract // Close database connections, write to a database with state, etc } // Updates the contract with information about the current block // This is a method automatically called if it exists updateBlockInfo(blockNumber, blockId, previousBlockId, transactionId) { // Lifecycle method which sets block info this.blockNumber = blockNumber; this.blockId = blockId; this.previousBlockId = previousBlockId; this.transactionId = transactionId; } /** * Get Balance * * Helper method for getting the contract account balance. In the case of our dice contract * we want to make sure the account has enough money to pay out any bets * * @returns number */ async getBalance() { const account = await this._client.database.getAccounts([ACCOUNT]); if (account?.[0]) { const balance = (account[0].balance as string).split(&#39; &#39;); const amount = balance[0]; return parseFloat(amount); } } /** * Roll * * Automatically called when a custom JSON action matches the following method * * @param payload * @param param1 - sender and amount */ async roll(payload, { sender, amount }) { // Destructure the values from the payload const { roll } = payload; // The amount is formatted like 100 HIVE // The value is the first part, the currency symbol is the second const amountTrim = amount.split(&#39; &#39;); // Parse the numeric value as a real value const amountParsed = parseFloat(amountTrim[0]); // Format the amount to 3 decimal places const amountFormatted = parseFloat(amountTrim[0]).toFixed(3); // Trim any space from the currency symbol const amountCurrency = amountTrim[1].trim(); console.log(`Roll: ${roll} Amount parsed: ${amountParsed} Amount formatted: ${amountFormatted} Currency: ${amountCurrency}`); // Get the transaction from the blockchain const transaction = await Utils.getTransaction(this._client, this.blockNumber, this.transactionId); // Call the verifyTransfer method to confirm the transfer happened const verify = await Utils.verifyTransfer(transaction, sender, &#39;beggars&#39;, amount); // Get the balance of our contract account const balance = await this.getBalance(); // Transfer is valid if (verify) { // Server balance is less than the max bet, cancel and refund if (balance &lt; MAX_BET) { // Send back what was sent, the server is broke await Utils.transferHiveTokens(this._client, this._config, ACCOUNT, sender, amountTrim[0], amountTrim[1], `[Refund] The server could not fufill your bet.`); return; } // Bet amount is valid if (amountParsed &gt;= MIN_BET &amp;&amp; amountParsed &lt;= MAX_BET) { // Validate roll is valid if ((roll &gt;= 2 &amp;&amp; roll &lt;= 96) &amp;&amp; (direction === &#39;lesserThan&#39; || direction === &#39;greaterThan&#39;) &amp;&amp; VALID_CURRENCIES.includes(amountCurrency)) { // Roll a random value const random = rng(this.previousBlockId, this.blockId, this.transactionId); // Calculate the multiplier percentage const multiplier = new BigNumber(1).minus(HOUSE_EDGE).multipliedBy(100).dividedBy(roll); // Calculate the number of tokens won const tokensWon = new BigNumber(amountParsed).multipliedBy(multiplier).toFixed(3, BigNumber.ROUND_DOWN); // Memo that shows in users memo when they win const winningMemo = `You won ${tokensWon} ${TOKEN_SYMBOL}. Roll: ${random}, Your guess: ${roll}`; // Memo that shows in users memo when they lose const losingMemo = `You lost ${amountParsed} ${TOKEN_SYMBOL}. Roll: ${random}, Your guess: ${roll}`; // User won more than the server can afford, refund the bet amount if (parseFloat(tokensWon) &gt; balance) { await Utils.transferHiveTokens(this._client, this._config, ACCOUNT, sender, amountTrim[0], amountTrim[1], `[Refund] The server could not fufill your bet.`); return; } // If random value is less than roll if (random &lt; roll) { await Utils.transferHiveTokens(this._client, this._config, ACCOUNT, sender, tokensWon, TOKEN_SYMBOL, winningMemo); } else { await Utils.transferHiveTokens(this._client, this._config, ACCOUNT, sender, &#39;0.001&#39;, TOKEN_SYMBOL, losingMemo); } } else { // Invalid bet parameters, refund the user their bet await Utils.transferHiveTokens(this._client, this._config, ACCOUNT, sender, amountTrim[0], amountTrim[1], `[Refund] Invalid bet params.`); } } else { try { // We need to refund the user const transfer = await Utils.transferHiveTokens(this._client, this._config, ACCOUNT, sender, amountTrim[0], amountTrim[1], `[Refund] You sent an invalid bet amount.`); console.log(transfer); } catch (e) { console.log(e); } } } } } export default new DiceContract(); ``` ## Adding it to your application Create a file called `app.js` and add in the following. ```javascript import { Streamer } from &#39;hive-stream&#39;; import DiceContract from &#39;./dice.contract&#39;; const streamer = new Streamer({ ACTIVE_KEY: &#39;&#39;, // Needed for transfers JSON_ID: &#39;testdice&#39; // Identifier in the custom JSON payloads }); // Register the contract streamer.registerContract(&#39;hivedice&#39;, DiceContract); // Starts the streamer watching the blockchain streamer.start(); ``` ## Test it out In the contract code, put in your Hive username as the account and then transfer some Hive tokens to your own account (to you from you). Make sure you also supply your active key in the streamer constructor call in the above code (between the single quotes). In the memo field, enter stringified JSON like this: ``{&quot;hiveContract&quot;:{&quot;id&quot;:&quot;testdice&quot;, &quot;name&quot;:&quot;hivedice&quot;,&quot;action&quot;:&quot;roll&quot;,&quot;payload&quot;:{&quot;roll&quot;:10 }}}`` The ID in the memo must match what is provided to the config property `JSON_ID` this is what it uses to match transactions. In this case, it is `testdice` as the ID. The value `name` must match the value of the `registerContract` method&#39;s first argument value which is `hivedice` in our example. The `action` property matches the function name in the contract and finally the `payload` object is the data provided to the function call. I took the liberty of testing it out using my own account, to show you how the transfer for testing process works. ![transfer.PNG](https://files.peakd.com/file/peakd-hive/beggars/am5ZNZEA-transfer.PNG) As you can see from my two transactions showing the winning and losing, it works (which can be verified by checking my transactions on my wallet or blockchain explorer): ![transactions.PNG](https://files.peakd.com/file/peakd-hive/beggars/HnyJ7w4d-transactions.PNG) ## Conclusion This is just a rudimentary example of a basic dice contract. Some improvements might include support for direction as well as different odds, supporting different tokens and more. But, hopefully you can see what you can build with Hive Stream now. See: Tutorial: Building A Dice Game Contract With Hive Stream by @beggars" />
<link rel="canonical" href="https://hive.blog/hive-139531/@beggars/tutorial-building-a-dice-game-contract-with-hive-stream" />
<meta property="og:url" content="https://hive.blog/hive-139531/@beggars/tutorial-building-a-dice-game-contract-with-hive-stream" />
<meta property="og:site_name" content="Hive Chain Documentation" />
<meta property="og:image" content="https://files.peakd.com/file/peakd-hive/beggars/am5ZNZEA-transfer.PNG" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-04-04T03:59:09-07:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://files.peakd.com/file/peakd-hive/beggars/am5ZNZEA-transfer.PNG" />
<meta property="twitter:title" content="Tutorial: Building A Dice Game Contract With Hive Stream" />
<script type="application/ld+json">
{"description":"Hot off the heels of announcing [some huge updates](https://peakd.com/hive-139531/@beggars/hive-stream-update-support-for-writing-custom-contracts-on-the-hive-blockchain) to Hive Stream which features the ability to write &quot;smart&quot; contracts, I promised a tutorial would be coming showing you how to write one and what could be more fitting than writing a contract for a dice game? Basing this off of the dice contract that Hive Engine ships with as an example, I&#39;ve created a contract that accepts a roll value which needs to be above the server roll. By the end of this tutorial, you&#39;ll have an understanding of how contracts are written (they&#39;re just classes) and how you can create your own smart dApps using them. If you&#39;re the kind of person who just wants to see the code, I have you covered. The code for the dice smart contract can be found [here](https://github.com/Vheissu/hive-stream/blob/master/src/contracts/dice.contract.ts). It is written in TypeScript but resembles Javascript basically if you&#39;re not familiar. This contract is based off of the dice contract in Hive Engine, except they&#39;re both fundamentally different in how they&#39;re pieced together. ## Install the Hive Stream package In your application, install the `hive-stream` package by running `npm install hive-stream` it&#39;s a published package on Npm. We also want to install seedrandom and bignumber.js as well since those are used in our contract code. ``` npm install seedrandom bignumber.js ``` ## Writing the contract Save the following as `dice.contract.js` in your application. ```javascript import { Streamer, Utils } from &#39;hive-stream&#39;; import seedrandom from &#39;seedrandom&#39;; import BigNumber from &#39;bignumber.js&#39;; const CONTRACT_NAME = &#39;hivedice&#39;; const ACCOUNT = &#39;&#39;; // Replace with the account const TOKEN_SYMBOL = &#39;HIVE&#39;; const HOUSE_EDGE = 0.05; const MIN_BET = 1; const MAX_BET = 10; // Random Number Generator const rng = (previousBlockId, blockId, transactionId) =&gt; { const random = seedrandom(`${previousBlockId}${blockId}${transactionId}`).double(); const randomRoll = Math.floor(random * 100) + 1; return randomRoll; }; // Valid betting currencies const VALID_CURRENCIES = [&#39;HIVE&#39;]; class DiceContract { client; config; blockNumber; blockId; previousBlockId; transactionId; create() { // Runs every time register is called on this contract // Do setup logic and code in here (creating a database, etc) } destroy() { // Runs every time unregister is run for this contract // Close database connections, write to a database with state, etc } // Updates the contract with information about the current block // This is a method automatically called if it exists updateBlockInfo(blockNumber, blockId, previousBlockId, transactionId) { // Lifecycle method which sets block info this.blockNumber = blockNumber; this.blockId = blockId; this.previousBlockId = previousBlockId; this.transactionId = transactionId; } /** * Get Balance * * Helper method for getting the contract account balance. In the case of our dice contract * we want to make sure the account has enough money to pay out any bets * * @returns number */ async getBalance() { const account = await this._client.database.getAccounts([ACCOUNT]); if (account?.[0]) { const balance = (account[0].balance as string).split(&#39; &#39;); const amount = balance[0]; return parseFloat(amount); } } /** * Roll * * Automatically called when a custom JSON action matches the following method * * @param payload * @param param1 - sender and amount */ async roll(payload, { sender, amount }) { // Destructure the values from the payload const { roll } = payload; // The amount is formatted like 100 HIVE // The value is the first part, the currency symbol is the second const amountTrim = amount.split(&#39; &#39;); // Parse the numeric value as a real value const amountParsed = parseFloat(amountTrim[0]); // Format the amount to 3 decimal places const amountFormatted = parseFloat(amountTrim[0]).toFixed(3); // Trim any space from the currency symbol const amountCurrency = amountTrim[1].trim(); console.log(`Roll: ${roll} Amount parsed: ${amountParsed} Amount formatted: ${amountFormatted} Currency: ${amountCurrency}`); // Get the transaction from the blockchain const transaction = await Utils.getTransaction(this._client, this.blockNumber, this.transactionId); // Call the verifyTransfer method to confirm the transfer happened const verify = await Utils.verifyTransfer(transaction, sender, &#39;beggars&#39;, amount); // Get the balance of our contract account const balance = await this.getBalance(); // Transfer is valid if (verify) { // Server balance is less than the max bet, cancel and refund if (balance &lt; MAX_BET) { // Send back what was sent, the server is broke await Utils.transferHiveTokens(this._client, this._config, ACCOUNT, sender, amountTrim[0], amountTrim[1], `[Refund] The server could not fufill your bet.`); return; } // Bet amount is valid if (amountParsed &gt;= MIN_BET &amp;&amp; amountParsed &lt;= MAX_BET) { // Validate roll is valid if ((roll &gt;= 2 &amp;&amp; roll &lt;= 96) &amp;&amp; (direction === &#39;lesserThan&#39; || direction === &#39;greaterThan&#39;) &amp;&amp; VALID_CURRENCIES.includes(amountCurrency)) { // Roll a random value const random = rng(this.previousBlockId, this.blockId, this.transactionId); // Calculate the multiplier percentage const multiplier = new BigNumber(1).minus(HOUSE_EDGE).multipliedBy(100).dividedBy(roll); // Calculate the number of tokens won const tokensWon = new BigNumber(amountParsed).multipliedBy(multiplier).toFixed(3, BigNumber.ROUND_DOWN); // Memo that shows in users memo when they win const winningMemo = `You won ${tokensWon} ${TOKEN_SYMBOL}. Roll: ${random}, Your guess: ${roll}`; // Memo that shows in users memo when they lose const losingMemo = `You lost ${amountParsed} ${TOKEN_SYMBOL}. Roll: ${random}, Your guess: ${roll}`; // User won more than the server can afford, refund the bet amount if (parseFloat(tokensWon) &gt; balance) { await Utils.transferHiveTokens(this._client, this._config, ACCOUNT, sender, amountTrim[0], amountTrim[1], `[Refund] The server could not fufill your bet.`); return; } // If random value is less than roll if (random &lt; roll) { await Utils.transferHiveTokens(this._client, this._config, ACCOUNT, sender, tokensWon, TOKEN_SYMBOL, winningMemo); } else { await Utils.transferHiveTokens(this._client, this._config, ACCOUNT, sender, &#39;0.001&#39;, TOKEN_SYMBOL, losingMemo); } } else { // Invalid bet parameters, refund the user their bet await Utils.transferHiveTokens(this._client, this._config, ACCOUNT, sender, amountTrim[0], amountTrim[1], `[Refund] Invalid bet params.`); } } else { try { // We need to refund the user const transfer = await Utils.transferHiveTokens(this._client, this._config, ACCOUNT, sender, amountTrim[0], amountTrim[1], `[Refund] You sent an invalid bet amount.`); console.log(transfer); } catch (e) { console.log(e); } } } } } export default new DiceContract(); ``` ## Adding it to your application Create a file called `app.js` and add in the following. ```javascript import { Streamer } from &#39;hive-stream&#39;; import DiceContract from &#39;./dice.contract&#39;; const streamer = new Streamer({ ACTIVE_KEY: &#39;&#39;, // Needed for transfers JSON_ID: &#39;testdice&#39; // Identifier in the custom JSON payloads }); // Register the contract streamer.registerContract(&#39;hivedice&#39;, DiceContract); // Starts the streamer watching the blockchain streamer.start(); ``` ## Test it out In the contract code, put in your Hive username as the account and then transfer some Hive tokens to your own account (to you from you). Make sure you also supply your active key in the streamer constructor call in the above code (between the single quotes). In the memo field, enter stringified JSON like this: ``{&quot;hiveContract&quot;:{&quot;id&quot;:&quot;testdice&quot;, &quot;name&quot;:&quot;hivedice&quot;,&quot;action&quot;:&quot;roll&quot;,&quot;payload&quot;:{&quot;roll&quot;:10 }}}`` The ID in the memo must match what is provided to the config property `JSON_ID` this is what it uses to match transactions. In this case, it is `testdice` as the ID. The value `name` must match the value of the `registerContract` method&#39;s first argument value which is `hivedice` in our example. The `action` property matches the function name in the contract and finally the `payload` object is the data provided to the function call. I took the liberty of testing it out using my own account, to show you how the transfer for testing process works. ![transfer.PNG](https://files.peakd.com/file/peakd-hive/beggars/am5ZNZEA-transfer.PNG) As you can see from my two transactions showing the winning and losing, it works (which can be verified by checking my transactions on my wallet or blockchain explorer): ![transactions.PNG](https://files.peakd.com/file/peakd-hive/beggars/HnyJ7w4d-transactions.PNG) ## Conclusion This is just a rudimentary example of a basic dice contract. Some improvements might include support for direction as well as different odds, supporting different tokens and more. But, hopefully you can see what you can build with Hive Stream now. See: Tutorial: Building A Dice Game Contract With Hive Stream by @beggars","mainEntityOfPage":{"@type":"WebPage","@id":"https://hive.blog/hive-139531/@beggars/tutorial-building-a-dice-game-contract-with-hive-stream"},"datePublished":"2020-04-04T03:59:09-07:00","@type":"BlogPosting","url":"https://hive.blog/hive-139531/@beggars/tutorial-building-a-dice-game-contract-with-hive-stream","image":"https://files.peakd.com/file/peakd-hive/beggars/am5ZNZEA-transfer.PNG","author":{"@type":"Person","name":"beggars"},"headline":"Tutorial: Building A Dice Game Contract With Hive Stream","dateModified":"2020-04-04T03:59:09-07:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://hivedocs.info/feed.xml" title="Hive Chain Documentation" /><script>
if(!(window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1")) {
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-161692811-1', 'auto');
  ga('send', 'pageview');
}
</script>
  
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
  
  <!-- jQuery Modal -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.css" />
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/turbolinks/5.2.0/turbolinks.js" integrity="sha256-iM4Yzi/zLj/IshPWMC1IluRxTtRjMqjPGd97TZ9yYpU=" crossorigin="anonymous"></script>
  <script src='https://unpkg.com/steem-content-renderer'></script>
  <script>
    (function () {
      if (Turbolinks.supported) {
        Turbolinks.setProgressBarDelay(500);
      }
    })();
  </script>
  <script src="/assets/javascript/universal-bridge-against-phishing.js"></script>
  <script src="/assets/javascript/lazysizes.min.js" async=""></script>
  <script src="/assets/javascript/authors.js" async=""></script>
  <link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Cousine|Inconsolata" rel="stylesheet">
  <link rel="shortcut icon" type="image/png" href="/assets/images/favicon.png">
</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Hive Chain Documentation</a>

      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/news/">News</a><a class="page-link" href="/howto/">How To</a><a class="page-link" href="/links/">Useful Links</a><!-- HTML elements for search -->
          <input type="text" id="search-input" placeholder="Search" />
          
          <ul id="results-container"></ul>

          <script src="/assets/javascript/search.js"></script>
          <script>
            var sjs = SimpleJekyllSearch({
              searchInput: document.getElementById('search-input'),
              resultsContainer: document.getElementById('results-container'),
              json: '/search.json'
            })
          </script>
          <!-- <form style="float: right;" class="form-inline" method="get" action="http://www.google.com/search">
            <input type="hidden" name="sitesearch" value="hivedocs.info" />
            <input type="text" name="q" maxlength="255" placeholder="Search" />
          </form> -->
          
          <!-- <a href="#" onclick="try { $('#authors-container').slideToggle(); } catch { document.getElementById('authors-container').style.display = 'block'; }; return false;">Authors &#187;</a>
          <a href="#" onclick="try { $('#topics-container').slideToggle(); } catch { document.getElementById('topics-container').style.display = 'block'; }; return false;">Topics &#187;</a> -->
          
          <a href="#authors-container" rel="modal:open">Authors &#187;</a>
          <a href="#topics-container" rel="modal:open">Topics &#187;</a>
          
          <div id="authors-container" class="modal" style="max-width: 80%; width: initial;">
            
            <h3>Authors</h3>
            <ul><li class="list-style-avatar" style="background-image: url(https://images.hive.blog/u/ali-h/avatar/small)">
                  <a href="https://hive.blog/@ali-h">ali-h</a>
                  <ul>
                        <li><small><a href="/tools/2021/02/24/json-doctor-an-open-source-tool-for-broadcasting-customjson-operations-on-hive.html">JSON DOCTOR - An open source tool for broadcasting custom_json operations on hive</a></small></li>
                      
                        <li><small><a href="/howto/nodejs/bot/2020/08/18/hivebot-easy-real-time-automation-on-top-of-hive-blockchain.html">HiveBot - Easy & real-time automation on top of Hive Blockchain</a></small></li>
                      </ul>
                </li><li class="list-style-avatar" style="background-image: url(https://images.hive.blog/u/arcange/avatar/small)">
                  <a href="https://hive.blog/@arcange">arcange</a>
                  <ul>
                        <li><small><a href="/tools/2021/03/16/hive-account-recovery-major-update-and-new-user-interface.html">Hive Account Recovery - Major update and new User Interface</a></small></li>
                      
                        <li><small><a href="/tools/2021/03/09/hive-account-recovery-update.html">Hive Account Recovery Update</a></small></li>
                      
                        <li><small><a href="/news/dotnet/2020/11/19/msnet-libraries.html">Introducing Hive libraries for Microsoft .NET</a></small></li>
                      
                        <li><small><a href="/news/sql/database/2020/11/12/hivesql-free.html">HiveSQL is free again - Thank you for your support!</a></small></li>
                      
                        <li><small><a href="/news/sql/database/2020/03/20/hivesql-is-ready-with-all-the-hive-blockchain-data.html">HiveSQL is ready with all the Hive blockchain data</a></small></li>
                      </ul>
                </li><li class="list-style-avatar" style="background-image: url(https://images.hive.blog/u/beggars/avatar/small)">
                  <a href="https://hive.blog/@beggars">beggars</a>
                  <ul>
                        <li><small><a href="/howto/dapps/nodejs/2020/04/06/tutorial-building-a-dice-game-contract-with-hive-stream-part-2.html">Tutorial: Building A Dice Game Contract With Hive Stream (Part 2)</a></small></li>
                      
                        <li><small><a href="/howto/dapps/nodejs/2020/04/04/tutorial-building-a-dice-game-contract-with-hive-stream.html">Tutorial: Building A Dice Game Contract With Hive Stream</a></small></li>
                      </ul>
                </li><li class="list-style-avatar" style="background-image: url(https://images.hive.blog/u/blocktrades/avatar/small)">
                  <a href="https://hive.blog/@blocktrades">blocktrades</a>
                  <ul>
                        <li><small><a href="/news/core/development/2021/04/06/8th-update-of-2021-on-blocktrades-work-on-hive-software.html">8th update of 2021 on BlockTrades work on Hive software</a></small></li>
                      
                        <li><small><a href="/news/core/development/2021/03/11/7th-update-of-2021-on-blocktrades-work-on-hive-software.html">7th update of 2021 on BlockTrades work on Hive software</a></small></li>
                      
                        <li><small><a href="/news/core/development/2021/03/02/6th-update-of-2021-on-blocktrades-work-on-hive-software.html">6th update of 2021 on BlockTrades work on Hive software</a></small></li>
                      
                        <li><small><a href="/news/core/development/2021/02/19/5th-update-on-blocktrades-hive-development-progress.html">5th update on BlockTrades' Hive development progress</a></small></li>
                      
                        <li><small><a href="/news/core/development/2021/02/06/4th-update-of-2021-on-our-hive-software-work.html">4th update of 2021 on our Hive software work</a></small></li>
                      
                        <li><small><a href="/news/core/development/2021/01/24/3rd-update-of-2021-on-our-hive-software-work.html">3rd update of 2021 on our Hive software work</a></small></li>
                      
                        <li><small><a href="/news/core/development/2021/01/16/2nd-update-of-2021-on-our-hive-software-work.html">2nd update of 2021 on our Hive software work</a></small></li>
                      
                        <li><small><a href="/news/devops/api/2021/01/05/hive-api-node-performance-measurement.html">Hive API node performance measurement</a></small></li>
                      
                        <li><small><a href="/news/core/development/2021/01/05/1st-update-of-2021-on-blocktrades-work-on-hive-software.html">1st update of 2021 on BlockTrades work on Hive software</a></small></li>
                      
                        <li><small><a href="/news/core/development/2020/12/09/updated-on-blocktrades-hive-work-as-of-dec-9th-2020.html">Updated on BlockTrades Hive work (as of Dec 9th 2020)</a></small></li>
                      
                        <li><small><a href="/news/core/development/2020/12/02/roadmap-for-hive-related-work-by-blocktrades-in-the-next-6-months.html">Roadmap for Hive-related work by BlockTrades in the next 6 months</a></small></li>
                      
                        <li><small><a href="/news/core/development/2020/11/16/update-on-blocktrades-hive-work-nov-16th.html">Update on BlockTrades Hive Work (Nov 16th)</a></small></li>
                      
                        <li><small><a href="/news/core/development/2020/11/02/blocktrades-update-on-hive-development-work.html">BlockTrades update on Hive development work</a></small></li>
                      
                        <li><small><a href="/news/core/development/2020/10/26/update-on-blocktrades-hive-core-coding.html">Update on BlockTrades Hive core coding</a></small></li>
                      
                        <li><small><a href="/news/core/development/2020/10/18/update-on-blocktrades-work-and-the-results-of-hf24.html">Update on Blocktrades work and the results of HF24</a></small></li>
                      
                        <li><small><a href="/dapps/2020/08/28/misconceptions-about-2nd-layer-apps-part-1.html">Misconceptions about 2nd layer apps: part 1</a></small></li>
                      
                        <li><small><a href="/howto/contribute/development/2020/04/03/hive-workflow-proposal.html">Hive workflow proposal</a></small></li>
                      </ul>
                </li><li class="list-style-avatar" style="background-image: url(https://images.hive.blog/u/crokkon/avatar/small)">
                  <a href="https://hive.blog/@crokkon">crokkon</a>
                  <ul>
                        <li><small><a href="/tools/beem/python/raspberrypi/2020/05/17/hive-tools-libs-on-a-raspberry-pi-4.html">Hive Tools/Libs on a Raspberry Pi 4</a></small></li>
                      </ul>
                </li><li class="list-style-avatar" style="background-image: url(https://images.hive.blog/u/dbuzz/avatar/small)">
                  <a href="https://hive.blog/@dbuzz">dbuzz</a>
                  <ul>
                        <li><small><a href="/tools/2020/12/30/embed-and-buzz-directly-from-any-web-page-meet-the-embed-buzz-button.html">Embed and Buzz Directly from any web page!  Meet the EMBED BUZZ BUTTON</a></small></li>
                      </ul>
                </li><li class="list-style-avatar" style="background-image: url(https://images.hive.blog/u/deathwing/avatar/small)">
                  <a href="https://hive.blog/@deathwing">deathwing</a>
                  <ul>
                        <li><small><a href="/howto/hivemind/2021/04/12/how-to-setup-a-hivemind-dev-environment.html">How to setup a Hivemind Dev Environment</a></small></li>
                      
                        <li><small><a href="/howto/witness/2020/04/01/how-to-set-up-your-witness-server-with-mira.html">How to set up your Witness server with MIRA?</a></small></li>
                      </ul>
                </li><li class="list-style-avatar" style="background-image: url(https://images.hive.blog/u/ecency/avatar/small)">
                  <a href="https://hive.blog/@ecency">ecency</a>
                  <ul>
                        <li><small><a href="/news/devops/api/2020/12/29/rpc-proxy-for-blockchain-opensourced.html">RPC-Proxy for blockchain, opensourced</a></small></li>
                      </ul>
                </li><li class="list-style-avatar" style="background-image: url(https://images.hive.blog/u/emrebeyler/avatar/small)">
                  <a href="https://hive.blog/@emrebeyler">emrebeyler</a>
                  <ul>
                        <li><small><a href="/news/devops/api/2021/01/27/introducing-hived-rpc-scanner-a-cli-tool-to-check-the-status-of-hive-rpc-nodes-by-testing-certain-endpoints.html">hived-rpc-scanner: A tool to check the status of Hive RPC nodes by testing certain endpoints.</a></small></li>
                      
                        <li><small><a href="/howto/hivesigner/python/wallet/2020/04/14/powering-up-2.html">Hivesigner Python Client</a></small></li>
                      </ul>
                </li><li class="list-style-avatar" style="background-image: url(https://images.hive.blog/u/engrave/avatar/small)">
                  <a href="https://hive.blog/@engrave">engrave</a>
                  <ul>
                        <li><small><a href="/howto/nano/nodejs/wallet/2021/03/02/javascript-library-for-ledger-nano-s-hive-application.html">JavaScript library for Ledger Nano S HIVE application</a></small></li>
                      
                        <li><small><a href="/howto/devops/docker/2020/04/19/improvements-for-condenser-repository-continuous-integration-and-deployments.html">Improvements for Condenser repository, Continuous Integration and Deployments</a></small></li>
                      </ul>
                </li><li class="list-style-avatar" style="background-image: url(https://images.hive.blog/u/geekgirl/avatar/small)">
                  <a href="https://hive.blog/@geekgirl">geekgirl</a>
                  <ul>
                        <li><small><a href="/howto/beem/python/custom_json/2021/03/22/using-hive-blockchain-custom-json-operation-with-python-and-beem.html">Using Hive Blockchain Custom Json Operation with Python & Beem</a></small></li>
                      
                        <li><small><a href="/howto/python/hivesql/2021/01/12/using-hivesql-with-python-on-mac.html">Using HiveSQL with Python on Mac</a></small></li>
                      </ul>
                </li><li class="list-style-avatar" style="background-image: url(https://images.hive.blog/u/good-karma/avatar/small)">
                  <a href="https://hive.blog/@good-karma">good-karma</a>
                  <ul>
                        <li><small><a href="/news/nodejs/hivesigner/2021/02/27/hivesigner-sdk-rewritten-in-typescript.html">Hivesigner SDK rewritten in typescript</a></small></li>
                      
                        <li><small><a href="/seo/api/2020/11/27/hivesearcher-website-opensourced.html">Hivesearcher website opensourced</a></small></li>
                      
                        <li><small><a href="/news/nodejs/hivesigner/2020/09/14/hivesigner-documentation-hardfork-and-other-improvements.html">Hivesigner - Documentation, Hardfork and other improvements</a></small></li>
                      
                        <li><small><a href="/seo/api/2020/09/10/hivesearcher-free-integrate-it-into-your-hive-apps.html">Hivesearcher - free, integrate it into your Hive apps</a></small></li>
                      
                        <li><small><a href="/news/nodejs/hivesigner/imagehoster/2020/07/07/imagehoster-hivesigner-and-condenser-bounty.html">Imagehoster + Hivesigner and Condenser bounty</a></small></li>
                      
                        <li><small><a href="/news/hivesigner/2020/06/12/hivesigner-ui-simplified-0-2-0-release.html">Hivesigner UI simplified, 0.2.0 release</a></small></li>
                      
                        <li><small><a href="/news/swagger/api/2020/04/29/interactive-hive-api-moved-to-hivesigner.html">Interactive Hive API moved to Hivesigner</a></small></li>
                      
                        <li><small><a href="/news/nodejs/hivesigner/2020/04/14/devportal-hivesigner-updates.html">Devportal Hivesigner updates</a></small></li>
                      
                        <li><small><a href="/news/hivesigner/2020/04/05/steemconnect-notice.html">SteemConnect notice</a></small></li>
                      </ul>
                </li><li class="list-style-avatar" style="background-image: url(https://images.hive.blog/u/gtg/avatar/small)">
                  <a href="https://hive.blog/@gtg">gtg</a>
                  <ul>
                        <li><small><a href="/howto/witness/node/2020/11/06/diy-eclipse-jump-starter-kit-pure-and-undiluted.html">DIY Eclipse Jump Starter Kit - Pure and Undiluted</a></small></li>
                      
                        <li><small><a href="/news/core/development/2020/09/13/how-to-survive-eclipse-cheat-sheet.html">How to Survive Eclipse - Cheat Sheet (Updated)</a></small></li>
                      
                        <li><small><a href="/howto/witness/node/2020/08/23/witness-update-release-candidate-for-eclipse-is-out.html">Witness Update: Release Candidate for Eclipse is out.</a></small></li>
                      
                        <li><small><a href="/news/projects/hive/2020/07/27/a-curated-list-of-awesome-hive-resources.html">A curated list of awesome Hive resources.</a></small></li>
                      
                        <li><small><a href="/news/devops/hivemind/nodes/2020/05/04/hive-pressure-2-how-to-answer-hive-questions.html">Hive Pressure 2: How to Answer Hive Questions?</a></small></li>
                      
                        <li><small><a href="/news/devops/nodes/2020/04/19/hive-pressure-1-a-new-hope.html">Hive Pressure #1: A New Hope</a></small></li>
                      </ul>
                </li><li class="list-style-avatar" style="background-image: url(https://images.hive.blog/u/hivebuzz/avatar/small)">
                  <a href="https://hive.blog/@hivebuzz">hivebuzz</a>
                  <ul>
                        <li><small><a href="/news/devops/api/hivebuzz/engagement/2020/07/07/api.html">Introducing the HiveBuzz API for applications and websites</a></small></li>
                      </ul>
                </li><li class="list-style-avatar" style="background-image: url(https://images.hive.blog/u/hiveio/avatar/small)">
                  <a href="https://hive.blog/@hiveio">hiveio</a>
                  <ul>
                        <li><small><a href="/news/devops/api/2020/12/16/getblock-x-hive-providing-hive-node-services-presenting-at-hivefest-and-a-hive-giveaway.html">GetBlock x Hive : Providing Hive Node Services, Presenting at HiveFest, and a HIVE Giveaway</a></small></li>
                      
                        <li><small><a href="/news/core/development/2020/10/20/airdrop-vested-funds-distribution-round-corrections.html">Airdrop Vested Funds Distribution Round and Corrections</a></small></li>
                      
                        <li><small><a href="/news/core/development/2020/10/20/hive-first-community-hardfork-complete.html">Hive's First Community Hardfork is Complete! A Post Fork Perspective</a></small></li>
                      
                        <li><small><a href="/news/core/development/2020/10/08/has-the-eclipse-happened-explaining-how-hive-hardforks-work-and-activating-hf24-on-october-14th.html">Has the Eclipse Happened? Explaining How Hive Hardforks Work, and Activating HF24 on October 14th</a></small></li>
                      
                        <li><small><a href="/news/core/development/2020/09/24/final-hive-hf24-date-set-october-6-2020.html">FINAL HIVE HF24 DATE SET: October 6, 2020</a></small></li>
                      
                        <li><small><a href="/news/core/development/2020/08/21/tentative-hardfork-date-hive-hf24-information.html">Tentative Hardfork Date Set! Hive HF24 Information Mega Post</a></small></li>
                      
                        <li><small><a href="/news/core/development/2020/06/08/hardfork-24-resources-for-node-operators-and-developers.html">Hive Hardfork 24: Resources for Node Operators and Developers</a></small></li>
                      
                        <li><small><a href="/news/core/development/2020/06/04/hive-hardfork-24-upcoming-release-candidate-testnet-other-info.html">Hive Hardfork 24: Upcoming Release Candidate, Testnet, and Other Info</a></small></li>
                      
                        <li><small><a href="/news/core/development/2020/04/20/core-development-on-hive.html">Core Development on Hive</a></small></li>
                      
                        <li><small><a href="/news/2020/04/06/community-discussion-updates-hive-airdrop-exclusion-core-developer-meetings.html">Community Discussion and Updates: Hive Airdrop Exclusion List and Code Corrections, Core Developer Meetings</a></small></li>
                      
                        <li><small><a href="/news/2020/03/21/the-hive-blockchain-has-launched-successfully-recap-and-helpful-information.html">The Hive Blockchain Has Launched Successfully! Recap and Helpful Information</a></small></li>
                      
                        <li><small><a href="/news/2020/03/17/announcing-the-launch-of-hive-blockchain.html">Announcing the Launch of Hive Blockchain</a></small></li>
                      </ul>
                </li><li class="list-style-avatar" style="background-image: url(https://images.hive.blog/u/holger80/avatar/small)">
                  <a href="https://hive.blog/@holger80">holger80</a>
                  <ul>
                        <li><small><a href="/howto/beem/python/blocktivity/2020/12/20/verify-blocktivity-numbers-for-hive-and-blurt.html">Verify blocktivity numbers for Hive and Blurt</a></small></li>
                      
                        <li><small><a href="/news/python/wallet/2020/12/05/how-to-use-a-coldcard-mk3-to-derive-your-new-account-password-from-a-24-word-seed.html">How to use a coldcard MK3 to derive your new account password from a 24 word seed</a></small></li>
                      
                        <li><small><a href="/news/python/account-history/2020/11/06/update-for-beem-improved-account-history-handling.html">Update for beem: improved account history handling</a></small></li>
                      
                        <li><small><a href="/news/python/bot/2020/08/19/delegationonboardbot-a-new-bot-for-managing-delegation-to-referred-accounts-created-with-hiveonboarding.html">delegationOnboardBot - a new bot for managing delegation to referred accounts created with hiveonboarding</a></small></li>
                      
                        <li><small><a href="/howto/python/reports/2020/08/04/how-to-create-transactions-history-tables-with-python-for-your-tax-report.html">How to create transactions history tables with python for your tax report</a></small></li>
                      
                        <li><small><a href="/news/python/community/2020/07/14/update-for-beem-add-community-support.html">update for beem: add community support</a></small></li>
                      
                        <li><small><a href="/news/python/hive-engine/nft/2020/07/04/hiveengine-nft-support-has-been-added.html">hiveengine - NFT support has been added</a></small></li>
                      
                        <li><small><a href="/howto/beem/python/content/2020/05/23/how-to-fix-canonical-urls-and-links-in-your-pre-fork-posts.html">How to fix canonical URLs and links in your pre-fork posts</a></small></li>
                      
                        <li><small><a href="/howto/beem/python/wallet/2020/05/12/update-for-beem-support-for-ledger-nano-sx-has-been-added.html">update for beem: support for Ledger Nano (S/X) has been added</a></small></li>
                      
                        <li><small><a href="/howto/beem/python/wallet/2020/04/08/update-for-beem-beempy-installer-for-windows-and-beempy-as-shell.html">Update for beem: beempy installer for windows and beempy as shell</a></small></li>
                      
                        <li><small><a href="/howto/beem/python/communities/2020/04/06/update-for-beem-huge-performance-improvements-and-bridge-api-support.html">Update for beem: huge performance improvements and bridge API support</a></small></li>
                      
                        <li><small><a href="/howto/beem/python/account/2020/04/02/how-to-review-account-permissions-and-change-your-recovery-account.html">How to review account permissions and change your recovery account</a></small></li>
                      
                        <li><small><a href="/howto/beem/python/curation/2020/04/01/update-for-beem-fixing-author-curation-reward-calculation-and-more.html">Update for beem: fixing author/curation reward calculation and more</a></small></li>
                      
                        <li><small><a href="/howto/beem/python/market/hbd/2020/03/24/use-beempy-to-access-the-internal-hive-hbd-market.html">Use beempy to access the internal HIVE/HBD market</a></small></li>
                      </ul>
                </li><li class="list-style-avatar" style="background-image: url(https://images.hive.blog/u/howo/avatar/small)">
                  <a href="https://hive.blog/@howo">howo</a>
                  <ul>
                        <li><small><a href="/news/core/development/2021/04/13/hive-core-developer-meeting-21.html">Hive core developer meeting #21</a></small></li>
                      
                        <li><small><a href="/howto/contribute/qa/2021/04/01/wanna-help-test-rc-delegations-heres-all-you-need-to-know.html">Wanna help test RC delegations ? Here's all you need to know</a></small></li>
                      
                        <li><small><a href="/news/core/development/2021/03/30/hive-core-developer-meeting-20.html">Hive core developer meeting #20</a></small></li>
                      
                        <li><small><a href="/news/core/development/2021/03/15/hive-core-developer-meeting-19.html">Hive core developer meeting #19</a></small></li>
                      
                        <li><small><a href="/news/core/development/2021/02/22/hive-core-developer-meeting-18.html">Hive core developer meeting #18</a></small></li>
                      
                        <li><small><a href="/news/core/development/2021/02/16/core-developers-meeting-17.html">Core developers meeting #17</a></small></li>
                      
                        <li><small><a href="/news/core/development/2021/01/18/core-developers-meeting-16.html">Core developers meeting #16</a></small></li>
                      
                        <li><small><a href="/news/core/development/2021/01/05/core-developers-meeting-15.html">Core developers meeting #15</a></small></li>
                      
                        <li><small><a href="/news/core/development/2020/12/29/hive-deloppers-meeting-14.html">Hive developers meeting #14</a></small></li>
                      
                        <li><small><a href="/news/core/development/2020/11/25/hive-deloppers-meeting-13.html">Hive deloppers meeting #13</a></small></li>
                      
                        <li><small><a href="/news/core/development/2020/11/02/hive-developer-meeting-12.html">Hive developer meeting #12</a></small></li>
                      
                        <li><small><a href="/news/core/development/2020/10/23/hive-core-developper-meeting-11.html">Hive core developper meeting #11</a></small></li>
                      
                        <li><small><a href="/news/core/development/2020/10/05/hive-core-developper-meeting-10.html">Hive core developper meeting #10</a></small></li>
                      
                        <li><small><a href="/news/core/development/2020/09/23/core-development-report-8.html">Core development report #8</a></small></li>
                      
                        <li><small><a href="/news/core/development/2020/09/12/hive-core-developper-meeting-9.html">Hive core developper meeting #9</a></small></li>
                      
                        <li><small><a href="/news/core/development/2020/08/24/hive-core-developper-meeting-8.html">Hive core developper meeting #8</a></small></li>
                      
                        <li><small><a href="/news/core/development/2020/08/18/core-development-report-7.html">Core development report #7</a></small></li>
                      
                        <li><small><a href="/news/core/development/2020/07/26/core-development-report-6.html">Core development report #6</a></small></li>
                      
                        <li><small><a href="/news/core/development/2020/07/20/hive-core-developper-meeting-7.html">Hive core developper meeting #7</a></small></li>
                      
                        <li><small><a href="/news/core/development/2020/07/15/core-development-report-5.html">Core development report #5</a></small></li>
                      
                        <li><small><a href="/news/core/development/2020/07/09/hive-core-developper-meeting-6.html">Hive  core developper meeting #6</a></small></li>
                      
                        <li><small><a href="/news/core/development/2020/06/09/hive-developpers-bi-weekly-meetings-4-and-5.html">Hive developpers bi-weekly meetings #4 and #5 with a tl;dr ! </a></small></li>
                      
                        <li><small><a href="/news/core/development/2020/06/07/core-development-report-4.html">Core development report #4</a></small></li>
                      
                        <li><small><a href="/news/core/development/2020/05/28/core-development-report-3.html">Core development report #3</a></small></li>
                      
                        <li><small><a href="/news/core/development/2020/05/17/core-development-report-2-rc-delegations-are-ready-for-review.html">Core development report #2: Rc delegations are ready for review</a></small></li>
                      
                        <li><small><a href="/news/core/development/2020/05/09/core-development-report-1.html">Core development report #1</a></small></li>
                      
                        <li><small><a href="/news/core/development/2020/05/04/hive-core-dev-meeting-3-recording-and-1-and-2-i-m-late-sorry.html">Hive core dev meeting #3 recording (and #1 and #2 I'm late sorry)</a></small></li>
                      </ul>
                </li><li class="list-style-avatar" style="background-image: url(https://images.hive.blog/u/inertia/avatar/small)">
                  <a href="https://hive.blog/@inertia">inertia</a>
                  <ul>
                        <li><small><a href="/news/ruby/2021/04/22/ruby-client-for-hive-hive-ruby-103.html">Ruby Client for Hive: hive-ruby-1.0.3</a></small></li>
                      
                        <li><small><a href="/tools/docker/testnet/2021/04/15/tin-toy-hf26-on-a-local-testnet.html">Tin Toy - HF25 on a Local Testnet</a></small></li>
                      
                        <li><small><a href="/howto/beem/python/2021/03/16/devportal-python-tutorial-review-complete.html">Devportal Python Tutorial Review Complete</a></small></li>
                      
                        <li><small><a href="/news/documentation/2021/02/27/hive-devportal-update-sdk-references-python-tutorials.html">Hive Devportal Update: SDK References, Python Tutorials</a></small></li>
                      
                        <li><small><a href="/news/ruby/eclipse/2020/11/09/radiator-v0-4-8-hive-ruby-api-client-eclipse-update.html">Radiator v0.4.8 - Hive Ruby API Client: Eclipse Update</a></small></li>
                      
                        <li><small><a href="/tools/docker/testnet/2020/11/04/tin-toy-update-eclipse-hf.html">Tin Toy Update - Eclipse HF</a></small></li>
                      
                        <li><small><a href="/news/ruby/eclipse/2020/10/14/ruby-client-for-hive-hive-ruby-1-0-1.html">Ruby Client for Hive: hive-ruby-1.0.1</a></small></li>
                      
                        <li><small><a href="/news/ruby/beechat/2020/10/08/beeline-a-beechat-client-framework-for-ruby.html">BeeLine, a BeeChat Client Framework for Ruby</a></small></li>
                      
                        <li><small><a href="/tools/ruby/2020/05/07/ruby-client-for-hive-hive-ruby-1-0-0-pre-1.html">Ruby Client for Hive: hive-ruby-1.0.0.pre.1</a></small></li>
                      
                        <li><small><a href="/tools/ruby/jekyll/2020/04/01/jekyll-hive.html">Jekyll::Hive</a></small></li>
                      </ul>
                </li><li class="list-style-avatar" style="background-image: url(https://images.hive.blog/u/keychain/avatar/small)">
                  <a href="https://hive.blog/@keychain">keychain</a>
                  <ul>
                        <li><small><a href="/news/projects/hive-keychain/2021/04/19/beta-testing-the-keychain-in-app-browser.html">Beta testing the Keychain in-App browser</a></small></li>
                      
                        <li><small><a href="/news/projects/hive-keychain/2021/03/02/hive-keychain-mobile-release-android-and-ios.html">Hive Keychain mobile release (Android and iOS)</a></small></li>
                      
                        <li><small><a href="/news/nodejs/hive-keychain/2020/11/08/hive-keychain-development-proposal-2.html">Hive Keychain Development Proposal #2</a></small></li>
                      
                        <li><small><a href="/news/nodejs/hive-keychain/2020/09/24/hive-keychain-dhf-week-18.html">Hive Keychain DHF - Week 18</a></small></li>
                      </ul>
                </li><li class="list-style-avatar" style="background-image: url(https://images.hive.blog/u/keys-defender/avatar/small)">
                  <a href="https://hive.blog/@keys-defender">keys-defender</a>
                  <ul>
                        <li><small><a href="/news/devops/security/2021/03/17/phishing-on-hive-no-more-solution-for-all-frontends.html">Phishing on Hive? No more. Solution for all Frontends.</a></small></li>
                      </ul>
                </li><li class="list-style-avatar" style="background-image: url(https://images.hive.blog/u/lonelywolf/avatar/small)">
                  <a href="https://hive.blog/@lonelywolf">lonelywolf</a>
                  <ul>
                        <li><small><a href="/howto/nodejs/bot/2020/04/14/hive-patched-upvoting-by-payment-in-4-easy-steps-basic-bot.html">[Hive Patched] Upvoting By Payment In 4 Easy Steps - Basic Bot</a></small></li>
                      
                        <li><small><a href="/howto/nodejs/2020/04/10/quick-tip-hive-scripting-in-3-easy-steps.html">Quick Tip: Hive Scripting - In 3 easy steps</a></small></li>
                      </ul>
                </li><li class="list-style-avatar" style="background-image: url(https://images.hive.blog/u/mahdiyari/avatar/small)">
                  <a href="https://hive.blog/@mahdiyari">mahdiyari</a>
                  <ul>
                        <li><small><a href="/howto/nodejs/2021/04/11/making-a-decentralized-game-on-hive-part-5.html">Making a Decentralized Game on Hive - Part 5</a></small></li>
                      
                        <li><small><a href="/howto/nodejs/2021/04/01/making-a-decentralized-game-on-hive-part-4.html">Making a Decentralized Game on Hive - Part 4</a></small></li>
                      
                        <li><small><a href="/howto/nodejs/2021/03/28/making-a-decentralized-game-on-hive-part-3.html">Making a Decentralized Game on Hive - Part 3</a></small></li>
                      
                        <li><small><a href="/howto/nodejs/2021/03/16/making-a-decentralized-game-on-hive-part-2.html">Making a Decentralized Game on Hive - Part 2</a></small></li>
                      
                        <li><small><a href="/howto/nodejs/2021/03/13/making-a-decentralized-game-on-hive-tic-tac-toe-part-1.html">Making a Decentralized Game on Hive - Tic Tac Toe - Part 1</a></small></li>
                      
                        <li><small><a href="/howto/transition/hardfork/2020/08/04/how-to-prepare-your-applications-for-hf24.html">How to prepare your applications for HF24</a></small></li>
                      
                        <li><small><a href="/news/nodejs/2020/06/11/4twepi-hf24-or-hive-js-aka-steem-js.html">HF24 | Hive-js (aka steem-js)</a></small></li>
                      
                        <li><small><a href="/news/nodejs/2020/04/27/hive-js-and-hive-tx-migration-to-hive-breaking-changes-for-browsers.html">Hive-js & Hive-tx migration to Hive - Breaking changes for browsers!</a></small></li>
                      </ul>
                </li><li class="list-style-avatar" style="background-image: url(https://images.hive.blog/u/netuoso/avatar/small)">
                  <a href="https://hive.blog/@netuoso">netuoso</a>
                  <ul>
                        <li><small><a href="/howto/beem/python/wallet/2020/05/12/example-of-using-the-ledger-nano-s-with-beem.html">Example of using the Ledger Nano S with Beem</a></small></li>
                      
                        <li><small><a href="/howto/nano/python/wallet/2020/05/10/hive-application-for-the-ledger-nano-s-x-hardware-wallet.html">Hive Application for the Ledger Nano S/X Hardware Wallet</a></small></li>
                      </ul>
                </li><li class="list-style-avatar" style="background-image: url(https://images.hive.blog/u/peakd/avatar/small)">
                  <a href="https://hive.blog/@peakd">peakd</a>
                  <ul>
                        <li><small><a href="/news/hivemind/api/2020/11/24/hivemind-api-extension-community-curated-content-and-more.html">Hivemind API Extension, Community Curated Content and More</a></small></li>
                      
                        <li><small><a href="/news/devops/api/2020/10/30/announcing-the-hive-node-beacon-project.html">Announcing the Hive Node Beacon project</a></small></li>
                      </ul>
                </li><li class="list-style-avatar" style="background-image: url(https://images.hive.blog/u/penguinpablo/avatar/small)">
                  <a href="https://hive.blog/@penguinpablo">penguinpablo</a>
                  <ul>
                        <li><small><a href="/news/projects/2020/03/21/hiveblockexplorer-com-is-now-online.html">HiveBlockExplorer.com is now online</a></small></li>
                      </ul>
                </li><li class="list-style-avatar" style="background-image: url(https://images.hive.blog/u/primersion/avatar/small)">
                  <a href="https://hive.blog/@primersion">primersion</a>
                  <ul>
                        <li><small><a href="/howto/beem/python/account/2021/03/29/changing-your-recovery-account-and-recovering-your-account-using-python.html">Changing your recovery account and recovering your account using python</a></small></li>
                      </ul>
                </li><li class="list-style-avatar" style="background-image: url(https://images.hive.blog/u/quochuy/avatar/small)">
                  <a href="https://hive.blog/@quochuy">quochuy</a>
                  <ul>
                        <li><small><a href="/news/nodejs/condenser/2021/04/22/6cv6sw-my-new-contributions-to-the-hive-condenser-and-wallet-apps.html">My new contributions to the Hive Condenser and Wallet apps.</a></small></li>
                      
                        <li><small><a href="/news/nodejs/condenser/2021/04/13/5ps1ah-my-new-contributions-to-the-hive-condenser-and-wallet-apps.html">My new contributions to the Hive Condenser and Wallet apps.</a></small></li>
                      
                        <li><small><a href="/news/nodejs/condenser/2021/03/30/5ejnqa-my-new-contributions-to-the-hive-condenser-and-wallet-apps.html">My new contributions to the Hive Condenser and Wallet apps.</a></small></li>
                      
                        <li><small><a href="/news/nodejs/condenser/2021/02/16/my-new-contributions-to-the-hive-condenser-and-wallet-apps.html">My new contributions to the Hive Condenser and Wallet apps.</a></small></li>
                      
                        <li><small><a href="/news/nodejs/condenser/2021/01/28/22ehbp-my-new-contributions-to-the-hive-condenser.html">My new contributions to the Hive Condenser</a></small></li>
                      
                        <li><small><a href="/news/nodejs/condenser/2021/01/21/4e8t3w-my-new-contributions-to-the-hive-condenser.html">My new contributions to the Hive Condenser</a></small></li>
                      
                        <li><small><a href="/news/nodejs/condenser/2021/01/08/my-new-contributions-to-the-hive-condenser-and-hive-keychain.html">My new contributions to the Hive Condenser, Wallet & Hive Keychain</a></small></li>
                      
                        <li><small><a href="/news/nodejs/condenser/2020/11/25/6gshbx-my-new-contributions-to-the-hive-condenser.html">My new contributions to the Hive Condenser</a></small></li>
                      
                        <li><small><a href="/news/nodejs/condenser/2020/11/09/29vxd3-my-new-contributions-to-the-hive-condenser.html">My new contributions to the Hive Condenser</a></small></li>
                      
                        <li><small><a href="/news/nodejs/condenser/2020/10/27/6h8fgn-my-new-contributions-to-the-hive-condenser.html">My new contributions to the Hive Condenser</a></small></li>
                      
                        <li><small><a href="/howto/nodejs/wallet/2020/05/14/beta-hive-ledger-web-interface.html">Beta Hive Ledger web interface</a></small></li>
                      </ul>
                </li><li class="list-style-avatar" style="background-image: url(https://images.hive.blog/u/reazuliqbal/avatar/small)">
                  <a href="https://hive.blog/@reazuliqbal">reazuliqbal</a>
                  <ul>
                        <li><small><a href="/news/devops/api/chat/2020/09/29/open-sourcing-beechat-client-and-developer-documentation.html">Open sourcing BeeChat Client And Developer Documentation</a></small></li>
                      </ul>
                </li><li class="list-style-avatar" style="background-image: url(https://images.hive.blog/u/rishi556/avatar/small)">
                  <a href="https://hive.blog/@rishi556">rishi556</a>
                  <ul>
                        <li><small><a href="/howto/witness/pricefeed/2020/11/26/how-to-setup-hive-witness-pricefeed-using-hivefeed-js.html">How To Setup Hive Witness Pricefeed Using Hivefeed-JS</a></small></li>
                      
                        <li><small><a href="/howto/witness/docker/node/2020/11/08/how-to-set-up-a-hive-witness-using-hiab-at-version-1-24-4.html">How To Set Up A Hive Witness Using HIAB At Version 1.24.4</a></small></li>
                      
                        <li><small><a href="/howto/nodejs/reports/2020/07/17/my-scripts-4-your-curation-reward-in-the-past-24-hours.html">My Scripts 4- Your Curation Reward In The Past 24 Hours</a></small></li>
                      
                        <li><small><a href="/howto/nodejs/automation/2020/07/15/my-scripts-3-auto-sending-from-one-account-to-multiple-others.html">My Scripts 3- Auto Sending From One Account To Multiple Others</a></small></li>
                      
                        <li><small><a href="/howto/nodejs/transfer/2020/07/13/my-scripts-2-auto-send-from-multi-to-one-destination.html">My Scripts 2- Auto Send From Multi To One Destination</a></small></li>
                      
                        <li><small><a href="/howto/nodejs/witness/2020/07/12/my-scripts-1-witness-rank-and-amount-needed-to-rank-up.html">My Scripts 1- Witness Rank And Amount Needed To Rank Up</a></small></li>
                      </ul>
                </li><li class="list-style-avatar" style="background-image: url(https://images.hive.blog/u/someguy123/avatar/small)">
                  <a href="https://hive.blog/@someguy123">someguy123</a>
                  <ul>
                        <li><small><a href="/howto/witness/docker/node/2020/04/27/how-to-set-up-a-hive-witness-or-seed-node-non-mira-upgrade-from-steem-docker-to-hive-docker.html">How to set up a Hive Witness or Seed node (non-MIRA) / Upgrade from Steem-Docker to Hive-Docker</a></small></li>
                      </ul>
                </li><li class="list-style-avatar" style="background-image: url(https://images.hive.blog/u/stoodkev/avatar/small)">
                  <a href="https://hive.blog/@stoodkev">stoodkev</a>
                  <ul>
                        <li><small><a href="/howto/nodejs/react/2020/07/07/how-to-use-hivejs-or-other-modules-referencing-core-node-js-modules-on-react-native.html">How to use HiveJs (or other modules referencing core Node.js modules) on React Native</a></small></li>
                      </ul>
                </li><li class="list-style-avatar" style="background-image: url(https://images.hive.blog/u/techcoderx/avatar/small)">
                  <a href="https://hive.blog/@techcoderx">techcoderx</a>
                  <ul>
                        <li><small><a href="/news/nodejs/encryption/2020/11/22/hivecrypt-javascript-module-for-hive-memo-encrypt-decrypt-on-wide-range-of-environments.html">Hivecrypt: JavaScript module for Hive memo encrypt/decrypt on wide range of environments</a></small></li>
                      </ul>
                </li><li class="list-style-avatar" style="background-image: url(https://images.hive.blog/u/thecrazygm/avatar/small)">
                  <a href="https://hive.blog/@thecrazygm">thecrazygm</a>
                  <ul>
                        <li><small><a href="/howto/beem/python/stream/2020/04/11/simple-transaction-monitor.html">Simple Transaction Monitor</a></small></li>
                      </ul>
                </li><li class="list-style-avatar" style="background-image: url(https://images.hive.blog/u/therealwolf/avatar/small)">
                  <a href="https://hive.blog/@therealwolf">therealwolf</a>
                  <ul>
                        <li><small><a href="/news/projects/hive/2021/04/12/google-analytics-reports-for-hiveio-150k-unique-users.html">Google Analytics Reports for Hive.io (~150k Unique Users)</a></small></li>
                      
                        <li><small><a href="/news/nodejs/hive-keychain/2020/12/02/npm-module-for-hive-keychain.html">NPM module for Hive Keychain</a></small></li>
                      
                        <li><small><a href="/news/projects/hive/2020/10/24/p-dpqzu9ckgo8doldcafddc45727eada7.html">Hive is finally on FontAwesome!</a></small></li>
                      
                        <li><small><a href="/howto/witness/2020/10/15/hf24-eclipse-and-hive-witness-essentials.html">HF24 Eclipse & Hive Witness Essentials</a></small></li>
                      
                        <li><small><a href="/news/projects/hive/2020/08/24/hive-io-updates.html">Hive.io Updates</a></small></li>
                      
                        <li><small><a href="/howto/witness/2020/04/07/hive-witness-essentials-rpc-failover-update.html">Hive Witness Essentials: RPC Failover Update</a></small></li>
                      
                        <li><small><a href="/howto/dhive/nodejs/rpc/2020/04/03/dhive-rpc-failover-support.html">dhive: RPC Failover Support</a></small></li>
                      </ul>
                </li><li class="list-style-avatar" style="background-image: url(https://images.hive.blog/u/yabapmatt/avatar/small)">
                  <a href="https://hive.blog/@yabapmatt">yabapmatt</a>
                  <ul>
                        <li><small><a href="/news/nodejs/hive-keychain/2020/04/17/hive-keychain-now-available-on-chrome-and-brave.html">Hive Keychain Now Available on Chrome & Brave!</a></small></li>
                      </ul>
                </li></ul>
          </div>
          
          <div id="topics-container" class="modal">
            <h3>Topics</h3>
            <ul><li><a class="page-link" href="/account-recovery/"><nobr>Account Recovery</nobr></a></li><li><a class="page-link" href="/core-development/"><nobr>Core Development</nobr></a></li><li><a class="page-link" href="/dapps/"><nobr>Dapps</nobr></a></li><li><a class="page-link" href="/docker/"><nobr>Docker</nobr></a></li><li><a class="page-link" href="/hardfork/"><nobr>Hardfork</nobr></a></li><li><a class="page-link" href="/hivemind/"><nobr>Hivemind</nobr></a></li><li><a class="page-link" href="/javascript/"><nobr>Javascript</nobr></a></li><li><a class="page-link" href="/multisig/"><nobr>Multisig</nobr></a></li><li><a class="page-link" href="/python/"><nobr>Python</nobr></a></li><li><a class="page-link" href="/ruby/"><nobr>Ruby</nobr></a></li><li><a class="page-link" href="/testnet/"><nobr>Testnet</nobr></a></li><li><a class="page-link" href="/tools/"><nobr>Tools</nobr></a></li><li><a class="page-link" href="/witness/"><nobr>Witness</nobr></a></li></ul>
          </div>
        </div>
      </nav>
  </div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <div class="pull-right well">
      <img src="https://images.hive.blog/u/beggars/avatar" width="128" height="128" class="lazyload" />
    </div>
    
    <h1 class="post-title p-name" itemprop="name headline">Tutorial: Building A Dice Game Contract With Hive Stream</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2020-04-04T03:59:09-07:00" itemprop="datePublished">Apr 4, 2020
      </time> <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">
          <a href="https://hive.blog/@beggars">beggars</a>
        </span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <div id="content-beggars-tutorial-building-a-dice-game-contract-with-hive-stream">Hot off the heels of announcing [some huge updates](https://peakd.com/hive-139531/@beggars/hive-stream-update-support-for-writing-custom-contracts-on-the-hive-blockchain) to Hive Stream which features the ability to write "smart" contracts, I promised a tutorial would be coming showing you how to write one and what could be more fitting than writing a contract for a dice game?

Basing this off of the dice contract that Hive Engine ships with as an example, I've created a contract that accepts a roll value which needs to be above the server roll. By the end of this tutorial, you'll have an understanding of how contracts are written (they're just classes) and how you can create your own smart dApps using them.

If you're the kind of person who just wants to see the code, I have you covered. The code for the dice smart contract can be found [here](https://github.com/Vheissu/hive-stream/blob/master/src/contracts/dice.contract.ts). It is written in TypeScript but resembles Javascript basically if you're not familiar. This contract is based off of the dice contract in Hive Engine, except they're both fundamentally different in how they're pieced together.

## Install the Hive Stream package

In your application, install the `hive-stream` package by running `npm install hive-stream` it's a published package on Npm. We also want to install seedrandom and bignumber.js as well since those are used in our contract code.

```
npm install seedrandom bignumber.js
```

## Writing the contract

Save the following as `dice.contract.js` in your application.

```javascript
import { Streamer, Utils } from 'hive-stream';
import seedrandom from 'seedrandom';
import BigNumber from 'bignumber.js';

const CONTRACT_NAME = 'hivedice';

const ACCOUNT = ''; // Replace with the account
const TOKEN_SYMBOL = 'HIVE';

const HOUSE_EDGE = 0.05;
const MIN_BET = 1;
const MAX_BET = 10;

// Random Number Generator
const rng = (previousBlockId, blockId, transactionId) =&gt; {
    const random = seedrandom(`${previousBlockId}${blockId}${transactionId}`).double();
    const randomRoll = Math.floor(random * 100) + 1;

    return randomRoll;
};

// Valid betting currencies
const VALID_CURRENCIES = ['HIVE'];

class DiceContract {
    client;
    config;

    blockNumber;
    blockId;
    previousBlockId;
    transactionId;

    create() {
        // Runs every time register is called on this contract
        // Do setup logic and code in here (creating a database, etc)
    }

    destroy() {
        // Runs every time unregister is run for this contract
        // Close database connections, write to a database with state, etc
    }

    // Updates the contract with information about the current block
    // This is a method automatically called if it exists
    updateBlockInfo(blockNumber, blockId, previousBlockId, transactionId) {
        // Lifecycle method which sets block info 
        this.blockNumber = blockNumber;
        this.blockId = blockId;
        this.previousBlockId = previousBlockId;
        this.transactionId = transactionId;
    }

    /**
     * Get Balance
     * 
     * Helper method for getting the contract account balance. In the case of our dice contract
     * we want to make sure the account has enough money to pay out any bets
     * 
     * @returns number
     */
    async getBalance() {
        const account = await this._client.database.getAccounts([ACCOUNT]);

        if (account?.[0]) {
            const balance = (account[0].balance as string).split(' ');
            const amount = balance[0];

            return parseFloat(amount);
        }
    }

    /**
     * Roll
     * 
     * Automatically called when a custom JSON action matches the following method
     * 
     * @param payload 
     * @param param1 - sender and amount
     */
    async roll(payload, { sender, amount }) {
        // Destructure the values from the payload
        const { roll } = payload;

        // The amount is formatted like 100 HIVE
        // The value is the first part, the currency symbol is the second
        const amountTrim = amount.split(' ');

        // Parse the numeric value as a real value
        const amountParsed = parseFloat(amountTrim[0]);

        // Format the amount to 3 decimal places
        const amountFormatted = parseFloat(amountTrim[0]).toFixed(3);

        // Trim any space from the currency symbol
        const amountCurrency = amountTrim[1].trim();

        console.log(`Roll: ${roll} 
                     Amount parsed: ${amountParsed} 
                     Amount formatted: ${amountFormatted} 
                     Currency: ${amountCurrency}`);

        // Get the transaction from the blockchain
        const transaction = await Utils.getTransaction(this._client, this.blockNumber, this.transactionId);

        // Call the verifyTransfer method to confirm the transfer happened
        const verify = await Utils.verifyTransfer(transaction, sender, 'beggars', amount);

        // Get the balance of our contract account
        const balance = await this.getBalance();

        // Transfer is valid
        if (verify) {
            // Server balance is less than the max bet, cancel and refund
            if (balance &lt; MAX_BET) {
                // Send back what was sent, the server is broke
                await Utils.transferHiveTokens(this._client, this._config, ACCOUNT, sender, amountTrim[0], amountTrim[1], `[Refund] The server could not fufill your bet.`);

                return;
            }

            // Bet amount is valid
            if (amountParsed &gt;= MIN_BET &amp;&amp; amountParsed &lt;= MAX_BET) {
                // Validate roll is valid
                if ((roll &gt;= 2 &amp;&amp; roll &lt;= 96) &amp;&amp; (direction === 'lesserThan' || direction === 'greaterThan') &amp;&amp; VALID_CURRENCIES.includes(amountCurrency)) {
                    // Roll a random value
                    const random = rng(this.previousBlockId, this.blockId, this.transactionId);

                    // Calculate the multiplier percentage
                    const multiplier = new BigNumber(1).minus(HOUSE_EDGE).multipliedBy(100).dividedBy(roll);

                    // Calculate the number of tokens won
                    const tokensWon = new BigNumber(amountParsed).multipliedBy(multiplier).toFixed(3, BigNumber.ROUND_DOWN);

                    // Memo that shows in users memo when they win
                    const winningMemo = `You won ${tokensWon} ${TOKEN_SYMBOL}. Roll: ${random}, Your guess: ${roll}`;

                    // Memo that shows in users memo when they lose
                    const losingMemo = `You lost ${amountParsed} ${TOKEN_SYMBOL}. Roll: ${random}, Your guess: ${roll}`;

                    // User won more than the server can afford, refund the bet amount
                    if (parseFloat(tokensWon) &gt; balance) {
                        await Utils.transferHiveTokens(this._client, this._config, ACCOUNT, sender, amountTrim[0], amountTrim[1], `[Refund] The server could not fufill your bet.`);

                        return;
                    }

                    // If random value is less than roll
                    if (random &lt; roll) {                            
                        await Utils.transferHiveTokens(this._client, this._config, ACCOUNT, sender, tokensWon, TOKEN_SYMBOL, winningMemo);
                    } else {
                        await Utils.transferHiveTokens(this._client, this._config, ACCOUNT, sender, '0.001', TOKEN_SYMBOL, losingMemo);
                    }
                } else {
                    // Invalid bet parameters, refund the user their bet
                    await Utils.transferHiveTokens(this._client, this._config, ACCOUNT, sender, amountTrim[0], amountTrim[1], `[Refund] Invalid bet params.`);
                }
            } else {
                try {
                    // We need to refund the user
                    const transfer = await Utils.transferHiveTokens(this._client, this._config, ACCOUNT, sender, amountTrim[0], amountTrim[1], `[Refund] You sent an invalid bet amount.`);

                    console.log(transfer);
                } catch (e) {
                    console.log(e);
                }
            }
        }
    }
}

export default new DiceContract();
```


## Adding it to your application

Create a file called `app.js` and add in the following.

```javascript
import { Streamer } from 'hive-stream';
import DiceContract from './dice.contract';

const streamer = new Streamer({
    ACTIVE_KEY: '', // Needed for transfers
    JSON_ID: 'testdice' // Identifier in the custom JSON payloads
});

// Register the contract
streamer.registerContract('hivedice', DiceContract);

// Starts the streamer watching the blockchain
streamer.start();
```

## Test it out

In the contract code, put in your Hive username as the account and then transfer some Hive tokens to your own account (to you from you). Make sure you also supply your active key in the streamer constructor call in the above code (between the single quotes).

In the memo field, enter stringified JSON like this: 

``{"hiveContract":{"id":"testdice", "name":"hivedice","action":"roll","payload":{"roll":10 }}}``

The ID in the memo must match what is provided to the config property `JSON_ID` this is what it uses to match transactions. In this case, it is `testdice` as the ID. The value `name` must match the value of the `registerContract` method's first argument value which is `hivedice` in our example. The `action` property matches the function name in the contract and finally the `payload` object is the data provided to the function call.

I took the liberty of testing it out using my own account, to show you how the transfer for testing process works.

![transfer.PNG](https://files.peakd.com/file/peakd-hive/beggars/am5ZNZEA-transfer.PNG)

As you can see from my two transactions showing the winning and losing, it works (which can be verified by checking my transactions on my wallet or blockchain explorer):

![transactions.PNG](https://files.peakd.com/file/peakd-hive/beggars/HnyJ7w4d-transactions.PNG)

## Conclusion

This is just a rudimentary example of a basic dice contract. Some improvements might include support for direction as well as different odds, supporting different tokens and more. But, hopefully you can see what you can build with Hive Stream now.</div>
<script crossorigin="anonymous" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>

<script src="https://unpkg.com/steem-content-renderer"></script>

<!-- <script src="https://cdn.jsdelivr.net/npm/hive-content-renderer/dist/hive-content-renderer.min.js"></script> -->
<script>
  $(document).ready(function() {
    try {
      const renderer = new SteemContentRenderer.DefaultRenderer({
      // const renderer = new HiveContentRenderer({
        baseUrl: "https://hive.blog/",
        breaks: true,
        skipSanitization: false,
        allowInsecureScriptTags: false,
        addNofollowToLinks: true,
        doNotShowImages: false,
        ipfsPrefix: "",
        assetsWidth: 640,
        assetsHeight: 480,
        imageProxyFn: (url) => url,
        usertagUrlFn: (account) => "/@beggars",
        hashtagUrlFn: (hashtag) => "/tutorial-building-a-dice-game-contract-with-hive-stream",
        isLinkSafeFn: (url) => true,
      });
      
      const inputElem = $('#content-beggars-tutorial-building-a-dice-game-contract-with-hive-stream').html();
      const outputElem = $('#content-beggars-tutorial-building-a-dice-game-contract-with-hive-stream');
      const output = renderer.render(inputElem);
      
      outputElem.html(output);
    } catch(e) {
      console.log(e);
    }
  });
</script>

<style>
  #content-beggars-tutorial-building-a-dice-game-contract-with-hive-stream {
    padding: 0 3rem;
    color: #444444;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    font-size: 16px;
    line-height: 1.8;
    text-shadow: 0 1px 0 #ffffff;
    padding: 0.5rem;
  }
  #content-beggars-tutorial-building-a-dice-game-contract-with-hive-stream code {
    background: white;
  }
  #content-beggars-tutorial-building-a-dice-game-contract-with-hive-stream a {
    border-bottom: 1px solid #444444; color: #444444; text-decoration: none;
  }
  #content-beggars-tutorial-building-a-dice-game-contract-with-hive-stream a:hover {
    border-bottom: 0;
  }
  #content-beggars-tutorial-building-a-dice-game-contract-with-hive-stream h1 {
    font-size: 2.2em;
  }
  #content-beggars-tutorial-building-a-dice-game-contract-with-hive-stream h2, h3, h4, h5 {
    margin-bottom: 0;
  }
  #content-beggars-tutorial-building-a-dice-game-contract-with-hive-stream header small {
    color: #999;
    font-size: 50%;
  }
  #content-beggars-tutorial-building-a-dice-game-contract-with-hive-stream img {
    max-width: 100%;
  }
</style>

<hr />

<p>
  See: <a href="https://peakd.com/hive-139531/@beggars/tutorial-building-a-dice-game-contract-with-hive-stream">Tutorial: Building A Dice Game Contract With Hive Stream</a>
  by
  <a href="https://hive.blog/@beggars">@beggars</a>
</p>

<p><a href="/nodejs">More About Node.js</a></p>

  </div><a class="u-url" href="/howto/dapps/nodejs/2020/04/04/tutorial-building-a-dice-game-contract-with-hive-stream.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading"><a rel="author" href="/">Hive Chain Documentation</a></h2>
    
    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">site curated by: @inertia</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Your resource for various levels of Hive Documentation.</p>
      </div>
    </div>
  </div>

</footer>
</body>

</html>
