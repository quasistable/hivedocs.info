<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="og:image" content="/assets/images/sticker.png" />
  <meta name="apple-mobile-web-app-title" content="Hive Docs" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" /><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>The easy way to upgrade to Hardfork 26 (Hive-in-a-box) | Hive Chain Documentation</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="The easy way to upgrade to Hardfork 26 (Hive-in-a-box)" />
<meta name="author" content="someguy123" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Read this if you’ve got an existing Hive-in-a-box (hive-docker) installation running the current version of Hive (HF25)." />
<meta property="og:description" content="Read this if you’ve got an existing Hive-in-a-box (hive-docker) installation running the current version of Hive (HF25)." />
<link rel="canonical" href="https://peakd.com/witness/@someguy123/the-easy-way-to-upgrade-to-hardfork-26-hive-in-a-box" />
<meta property="og:url" content="https://peakd.com/witness/@someguy123/the-easy-way-to-upgrade-to-hardfork-26-hive-in-a-box" />
<meta property="og:site_name" content="Hive Chain Documentation" />
<meta property="og:image" content="https://images.hive.blog/p/HuuaCwcKuiEjNgLb5Q7HbtUvB1HEHgck8hUkQMB4bFSJaxwFsYXGx7N9qtgEvLdGaoY?format=match&amp;mode=fit" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-10-06T09:32:24-07:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://images.hive.blog/p/HuuaCwcKuiEjNgLb5Q7HbtUvB1HEHgck8hUkQMB4bFSJaxwFsYXGx7N9qtgEvLdGaoY?format=match&amp;mode=fit" />
<meta property="twitter:title" content="The easy way to upgrade to Hardfork 26 (Hive-in-a-box)" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"someguy123"},"dateModified":"2022-10-06T09:32:24-07:00","datePublished":"2022-10-06T09:32:24-07:00","description":"Read this if you’ve got an existing Hive-in-a-box (hive-docker) installation running the current version of Hive (HF25).","headline":"The easy way to upgrade to Hardfork 26 (Hive-in-a-box)","image":"https://images.hive.blog/p/HuuaCwcKuiEjNgLb5Q7HbtUvB1HEHgck8hUkQMB4bFSJaxwFsYXGx7N9qtgEvLdGaoY?format=match&amp;mode=fit","mainEntityOfPage":{"@type":"WebPage","@id":"https://peakd.com/witness/@someguy123/the-easy-way-to-upgrade-to-hardfork-26-hive-in-a-box"},"url":"https://peakd.com/witness/@someguy123/the-easy-way-to-upgrade-to-hardfork-26-hive-in-a-box"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://hivedocs.info/feed.xml" title="Hive Chain Documentation" /><script>
if(!(window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1")) {
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-161692811-1', 'auto');
  ga('send', 'pageview');
}
</script>
  
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
  
  <!-- jQuery Modal -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.css" />
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/turbolinks/5.2.0/turbolinks.js" integrity="sha256-iM4Yzi/zLj/IshPWMC1IluRxTtRjMqjPGd97TZ9yYpU=" crossorigin="anonymous"></script>
  <script src='https://unpkg.com/steem-content-renderer'></script>
  <script>
    (function () {
      if (Turbolinks.supported) {
        Turbolinks.setProgressBarDelay(500);
      }
    })();
  </script>
  <script src="/assets/javascript/universal-bridge-against-phishing.js"></script>
  <script src="/assets/javascript/lazysizes.min.js" async=""></script>
  <link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css?family=Cousine|Inconsolata" rel="stylesheet" />
  <link rel="shortcut icon" type="image/png" href="/assets/images/favicon-80x80.png" />
  <link rel="apple-touch-icon" type="image/png" href="/assets/images/favicon-80x80.png" />
  <link rel="apple-touch-icon" sizes="152x152" href="/assets/images/favicon-80x80.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/favicon-80x80.png" />
  <link rel="apple-touch-icon" sizes="167x167" href="/assets/images/favicon-80x80.png" />
</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Hive Chain Documentation</a>

      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/news/">News</a><a class="page-link" href="/howto/">How To</a><a class="page-link" href="/links/">Useful Links</a><a class="page-link" href="/authors/">Authors</a><!-- HTML elements for search -->
          <input type="text" id="search-input" placeholder="Search" />
          
          <ul id="results-container"></ul>

          <script src="/assets/javascript/search.js"></script>
          <script>
            var sjs = SimpleJekyllSearch({
              searchInput: document.getElementById('search-input'),
              resultsContainer: document.getElementById('results-container'),
              json: '/search.json'
            })
          </script>
          <!-- <form style="float: right;" class="form-inline" method="get" action="http://www.google.com/search">
            <input type="hidden" name="sitesearch" value="hivedocs.info" />
            <input type="text" name="q" maxlength="255" placeholder="Search" />
          </form> -->
          
          <!-- <a href="#" onclick="try { $('#authors-container').slideToggle(); } catch { document.getElementById('authors-container').style.display = 'block'; }; return false;">Authors &#187;</a>
          <a href="#" onclick="try { $('#topics-container').slideToggle(); } catch { document.getElementById('topics-container').style.display = 'block'; }; return false;">Topics &#187;</a> -->
          
          <a href="#topics-container" rel="modal:open">Topics &#187;</a>
          
          <div id="topics-container" class="modal">
            <h3>Topics</h3>
            <ul><li><a class="page-link" href="/account-recovery/"><nobr>Account Recovery</nobr></a></li><li><a class="page-link" href="/core-development/"><nobr>Core Development</nobr></a></li><li><a class="page-link" href="/dapps/"><nobr>Dapps</nobr></a></li><li><a class="page-link" href="/docker/"><nobr>Docker</nobr></a></li><li><a class="page-link" href="/hardfork/"><nobr>Hardfork</nobr></a></li><li><a class="page-link" href="/hivemind/"><nobr>Hivemind</nobr></a></li><li><a class="page-link" href="/javascript/"><nobr>Javascript</nobr></a></li><li><a class="page-link" href="/multisig/"><nobr>Multisig</nobr></a></li><li><a class="page-link" href="/python/"><nobr>Python</nobr></a></li><li><a class="page-link" href="/ruby/"><nobr>Ruby</nobr></a></li><li><a class="page-link" href="/testnet/"><nobr>Testnet</nobr></a></li><li><a class="page-link" href="/tools/"><nobr>Tools</nobr></a></li><li><a class="page-link" href="/witness/"><nobr>Witness</nobr></a></li></ul>
          </div>
        </div>
      </nav>
  </div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <div class="pull-right well">
      <img src="https://images.hive.blog/u/someguy123/avatar" width="128" height="128" class="lazyload" />
    </div>
    
    <h1 class="post-title p-name" itemprop="name headline">The easy way to upgrade to Hardfork 26 (Hive-in-a-box)</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2022-10-06T09:32:24-07:00" itemprop="datePublished">Oct 6, 2022
      </time>• <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">
          <a href="/authors/#author-someguy123">someguy123</a>
        </span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <div id="content-someguy123-the-easy-way-to-upgrade-to-hardfork-26-hive-in-a-box">![Hive-in-a-box Logo](https://images.hive.blog/p/HuuaCwcKuiEjNgLb5Q7HbtUvB1HEHgck8hUkQMB4bFSJaxwFsYXGx7N9qtgEvLdGaoY?format=match&amp;mode=fit)

Despite my lack of posting for a while, I'm not dead! :)

I've been dealing with the useless healthcare system in the UK. I hope to return fulltime to Hive tool development once I have my health issues under control (nothing "serious", but severely impedes my productivity), I'll still be staying on top of my witness nodes, as well as urgent things such as hard forks, critical bug fixes for my Hive projects, etc. - my projects have mostly reached a point of stability anyway.

## What is, and when is Hard Fork 26?

#### Understanding a hard fork

A Hard Fork is a set of **breaking changes** for a cryptocurrency network - a series of updates to the official "node" software which are
NOT backwards compatible with older versions of the software.

Due to the lack of backwards compatibility, it would be dangerous if immediately after installing the new software on a block producing node, it started to produce blocks that were incompatible with the existing network. This would result in the blockchain splitting into **two different networks**, with separate blockchains.

On the Hive network, we call these block producers "witnesses", somewhat similar to "miners" on other cryptocurrencies.

#### Hard fork lock-in date

To prevent such a split in the network, hard forks generally have a **lock-in date/time** or **hardfork date/time**.

As of right now, the Hive network's Hard Fork 26 (HF26) is set to trigger on **October 11th 2022 at 12:00 PM UTC**

```
Tue, 11 October 2022 12:00:00 UTC (08:00:00 ET)
```

When the clock hits 12:00:00 PM on 11-Oct-2022, the Hive network will check to see if one of the following conditions has been met:


Either:

 - At least **17** of the **top 20 witnesses** are running `v1.26.0` or newer (Hard Fork 26)

Or:

 - **16** of the **top 20 witnesses** produce a block using the HF26 software, plus **one backup witness** (outside of the top 20)


## Blockchain Compression

HF26 introduces Blockchain Compression, so the `block_log` file will now only take up ~300GB of disk space :)

When you replay your node, or sync it up from scratch, the block_log will be compressed, saving you a lot of disk space.

## Upgrading from an existing HF25 HIAB installation

Read this if you've got an existing Hive-in-a-box (hive-docker) installation running the current active version of Hive (HF25).

**WARNING:** If you're upgrading a witness node, please remember to **disable your signing key** or switch to a backup node before upgrading your server, as it will require a full replay.



### Core update

Hive-in-a-box is an application independant of the Hive software itself, it's important to update the **core files** (i.e. the small programs and files which make up the Hive-in-a-box application) to obtain all the latest bug fixes, new features, and general improvements to HIAB over the past few months.

First, open your `hive-docker` folder.

```
cd ~/hive-docker
```

Next, make sure your Hive-in-a-box is on the `master` branch to ensure you get the correct updates.

```
git checkout master
```

Now it's time to update Hive-in-a-box's core files (this will *not* affect your `Hived` node if it's running)

```
git pull
```

Your HIAB files should now be up to date.

Now we can stop the server (**if upgrading a witness, please make sure to disable your key or switch to a backup**).

```
./run.sh stop
```

If your HIAB files were upgraded successfully, your `stop` output should look like this:

```
root@myserver ~/hive-docker # ./run.sh stop
If you don't care about a clean stop, you can force stop the container with ./run.sh kill
[2019-08-12 11:28:08 CEST] Stopping container 'witness' (allowing up to 600 seconds before killing)...
witness
[2019-08-12 11:28:12 CEST] Removing old container 'witness'...
witness
```

**Server Updates**

If you haven't upgraded your server's operating system and packages in a while, now is a good time to do that.

For Ubuntu / Debian:

```
sudo apt update -y
sudo apt autoremove -y
sudo apt upgrade
```

After all server updates have been installed, reboot your server to ensure any OS kernel updates are applied.

```
sudo reboot
```

### Upgrading to HF26


**Before proceeding with this section, please make sure you've updated HIAB and your server's OS (see above section "Core Update")**

First, make sure you're in the `hive-docker` folder

```
cd ~/hive-docker
```

Ensure your Hive node is stopped by running `./run.sh stop`

```
./run.sh stop
```

Download the latest Hive docker image (non-MIRA) using `install`

```
./run.sh install
```

Ensure that your `/dev/shm` RAM disk is the appropriate size (at least 20G or bigger is recommended)

```
sudo ./run.sh shm_size 24G
```

To make sure there's no leftover shared_memory files that might cause problems, you can use the new `clean` command to remove them. 

**Note:** Generally you only need to remove the shared memory files. Leave the blockchain and p2p folder.

```
sudo ./run.sh clean shm
```

**Example output for `clean shm`:**

```
[2019-08-12 11:40:04 CEST]  :: Blockchain:           /root/Hive-docker/data/witness_node_data_dir/blockchain
[2019-08-12 11:40:04 CEST]  :: P2P files:            /root/Hive-docker/data/witness_node_data_dir/p2p
[2019-08-12 11:40:04 CEST]  :: Shared Mem / Rocksdb: /dev/shm

[2019-08-12 11:40:14 CEST]  !!! Clearing shared memory files...
removed '/dev/shm/shared_memory.bin'
[2019-08-12 11:40:18 CEST]  +++ Cleared shared memory files
[2019-08-12 11:40:18 CEST]  ++ Done.
```

Now you're ready for a replay :)

Use the `replay` command to begin replaying Hive `0.21.0` (or whatever the latest version is at the time you're reading this)

```
./run.sh replay
```

To check that it's working, monitor the logs using the `logs` command. (You can also use `tslogs` to show the logs with timestamps)

```
./run.sh logs
```



```
------------------------------------------------------

            STARTING Hive NETWORK

------------------------------------------------------
initminer public key: STM8GC13uCZbP44HzMLV6zPZGwVQ8Nt4Kji8PapsPiNq1BK153XTX
chain id: 0000000000000000000000000000000000000000000000000000000000000000
blockchain version: 1.26.0
------------------------------------------------------
2425233ms main.cpp:121                  main                 ] Backtrace on segfault is enabled.
2425233ms chain_plugin.cpp:468          plugin_startup       ] Starting chain with shared_file_size: 64424509440 bytes
2425233ms chain_plugin.cpp:571          plugin_startup       ] Replaying blockchain on user request.
2425233ms database.cpp:235              reindex              ] Reindexing Blockchain
2425261ms block_log.cpp:142             open                 ] Log is nonempty
2425276ms block_log.cpp:151             open                 ] Index is nonempty
2425284ms database.cpp:258              reindex              ] Replaying blocks...
   0.281818%   100000 of 35483857   (61434M free)
   0.563637%   200000 of 35483857   (61434M free)
   0.845455%   300000 of 35483857   (61433M free)
```

Assuming you see `blockchain version: 1.26.0` and no strange error messages, then you've **successfully upgraded your Hive node** :)

Now go sit back, watch a movie, grab some food, and come back in 8-24 hours to check on the replay progress. Most servers (with at least 64G RAM) should be able to replay a witness/seed node within 10-12 hours. Your replay speed may vary anywhere from just 6-8 hours, up to 72 hours.




---

Thanks for reading!
---

<center>

![](https://cdn.discordapp.com/attachments/379745956134125569/737091330143944806/SOMEX123.gif)

</center>

GIF Avatar by @stellabelle

---

Do you like what I'm doing for Hive?
----


[Vote for me to be a Hive witness](https://peakd.com/witnesses) - every vote counts. 

----

Don't forget to follow me for more like this.
----

---

Have you ever thought about being a witness yourself? Join the [witness channel](https://openhive.chat/channel/witness). We're happy to guide you! Join in shaping the Hive economy.

Are you looking for a new server provider? My company @privex offers highly-reliable and affordable dedicated and virtual servers for HIVE, HBD, EOS, LTC, BTC, and even DOGE! Check out our website at https://www.privex.io

You can join Privex's public Discord at https://discord.privex.io - we also have a Matrix server, sign up at https://riot.privex.io (or if you have an existing Matrix account, join our General chat at `#privex:privex.io`)

---

</div>
<script crossorigin="anonymous" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>

<script src="https://unpkg.com/steem-content-renderer"></script>

<!-- <script src="https://cdn.jsdelivr.net/npm/hive-content-renderer/dist/hive-content-renderer.min.js"></script> -->
<script>
  $(document).ready(function() {
    try {
      const renderer = new SteemContentRenderer.DefaultRenderer({
      // const renderer = new HiveContentRenderer({
        baseUrl: "https://hive.blog/",
        breaks: true,
        skipSanitization: false,
        allowInsecureScriptTags: false,
        addNofollowToLinks: true,
        doNotShowImages: false,
        ipfsPrefix: "",
        assetsWidth: 640,
        assetsHeight: 480,
        imageProxyFn: (url) => url,
        usertagUrlFn: (account) => "/@someguy123",
        hashtagUrlFn: (hashtag) => "/the-easy-way-to-upgrade-to-hardfork-26-hive-in-a-box",
        isLinkSafeFn: (url) => true,
      });
      
      const inputElem = $('#content-someguy123-the-easy-way-to-upgrade-to-hardfork-26-hive-in-a-box').html();
      const outputElem = $('#content-someguy123-the-easy-way-to-upgrade-to-hardfork-26-hive-in-a-box');
      const output = renderer.render(inputElem);
      
      outputElem.html(output);
    } catch(e) {
      console.log(e);
    }
  });
</script>

<style>
  #content-someguy123-the-easy-way-to-upgrade-to-hardfork-26-hive-in-a-box {
    padding: 0 3rem;
    color: #444444;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    font-size: 16px;
    line-height: 1.8;
    text-shadow: 0 1px 0 #ffffff;
    padding: 0.5rem;
  }
  #content-someguy123-the-easy-way-to-upgrade-to-hardfork-26-hive-in-a-box code {
    background: white;
  }
  #content-someguy123-the-easy-way-to-upgrade-to-hardfork-26-hive-in-a-box a {
    border-bottom: 1px solid #444444; color: #444444; text-decoration: none;
  }
  #content-someguy123-the-easy-way-to-upgrade-to-hardfork-26-hive-in-a-box a:hover {
    border-bottom: 0;
  }
  #content-someguy123-the-easy-way-to-upgrade-to-hardfork-26-hive-in-a-box h1 {
    font-size: 2.2em;
  }
  #content-someguy123-the-easy-way-to-upgrade-to-hardfork-26-hive-in-a-box h2, h3, h4, h5 {
    margin-bottom: 0;
  }
  #content-someguy123-the-easy-way-to-upgrade-to-hardfork-26-hive-in-a-box header small {
    color: #999;
    font-size: 50%;
  }
  #content-someguy123-the-easy-way-to-upgrade-to-hardfork-26-hive-in-a-box img {
    max-width: 100%;
  }
</style>

<hr />

<p>
  See: <a href="https://peakd.com/witness/@someguy123/the-easy-way-to-upgrade-to-hardfork-26-hive-in-a-box">The easy way to upgrade to Hardfork 26 (Hive-in-a-box)</a>
  by
  <a href="https://hive.blog/@someguy123">@someguy123</a>
</p>


  </div><a class="u-url" href="/howto/witness/node/2022/10/06/the-easy-way-to-upgrade-to-hardfork-26-hive-in-a-box.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading"><a rel="author" href="/">Hive Chain Documentation</a></h2>
    
    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">site curated by: @inertia</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Your resource for various levels of Hive Documentation.</p>
      </div>
    </div>
  </div>

</footer>
</body>

</html>
