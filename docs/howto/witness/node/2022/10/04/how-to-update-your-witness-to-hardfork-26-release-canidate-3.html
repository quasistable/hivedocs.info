<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="og:image" content="/assets/images/sticker.png" />
  <meta name="apple-mobile-web-app-title" content="Hive Docs" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" /><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>How to update your witness to hardfork 26 release canidate 4 (Updated) | Hive Chain Documentation</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="How to update your witness to hardfork 26 release canidate 4 (Updated)" />
<meta name="author" content="themarkymark" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Update: Release canidate 4 has been released to fix an issue with rc delegations. Post has been updated to reflect this." />
<meta property="og:description" content="Update: Release canidate 4 has been released to fix an issue with rc delegations. Post has been updated to reflect this." />
<link rel="canonical" href="https://leofinance.io/@themarkymark/how-to-update-your-witness-to-hardfork-26-release-canidate-3" />
<meta property="og:url" content="https://leofinance.io/@themarkymark/how-to-update-your-witness-to-hardfork-26-release-canidate-3" />
<meta property="og:site_name" content="Hive Chain Documentation" />
<meta property="og:image" content="https://files.peakd.com/file/peakd-hive/themarkymark/23uQp8Fg9jkJ2ASGE4ka7X5h1gh3RGZMxEVPa7TimKw4R7UmYbZ1JB38WEZzg9dnuLDF1.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-10-04T23:37:42-07:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://files.peakd.com/file/peakd-hive/themarkymark/23uQp8Fg9jkJ2ASGE4ka7X5h1gh3RGZMxEVPa7TimKw4R7UmYbZ1JB38WEZzg9dnuLDF1.png" />
<meta property="twitter:title" content="How to update your witness to hardfork 26 release canidate 4 (Updated)" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"themarkymark"},"dateModified":"2022-10-04T23:37:42-07:00","datePublished":"2022-10-04T23:37:42-07:00","description":"Update: Release canidate 4 has been released to fix an issue with rc delegations. Post has been updated to reflect this.","headline":"How to update your witness to hardfork 26 release canidate 4 (Updated)","image":"https://files.peakd.com/file/peakd-hive/themarkymark/23uQp8Fg9jkJ2ASGE4ka7X5h1gh3RGZMxEVPa7TimKw4R7UmYbZ1JB38WEZzg9dnuLDF1.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://leofinance.io/@themarkymark/how-to-update-your-witness-to-hardfork-26-release-canidate-3"},"url":"https://leofinance.io/@themarkymark/how-to-update-your-witness-to-hardfork-26-release-canidate-3"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://hivedocs.info/feed.xml" title="Hive Chain Documentation" /><script>
if(!(window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1")) {
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-161692811-1', 'auto');
  ga('send', 'pageview');
}
</script>
  
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
  
  <!-- jQuery Modal -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.css" />
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/turbolinks/5.2.0/turbolinks.js" integrity="sha256-iM4Yzi/zLj/IshPWMC1IluRxTtRjMqjPGd97TZ9yYpU=" crossorigin="anonymous"></script>
  <script src='https://unpkg.com/steem-content-renderer'></script>
  <script>
    (function () {
      if (Turbolinks.supported) {
        Turbolinks.setProgressBarDelay(500);
      }
    })();
  </script>
  <script src="/assets/javascript/universal-bridge-against-phishing.js"></script>
  <script src="/assets/javascript/lazysizes.min.js" async=""></script>
  <link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css?family=Cousine|Inconsolata" rel="stylesheet" />
  <link rel="shortcut icon" type="image/png" href="/assets/images/favicon-80x80.png" />
  <link rel="apple-touch-icon" type="image/png" href="/assets/images/favicon-80x80.png" />
  <link rel="apple-touch-icon" sizes="152x152" href="/assets/images/favicon-80x80.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/favicon-80x80.png" />
  <link rel="apple-touch-icon" sizes="167x167" href="/assets/images/favicon-80x80.png" />
</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Hive Chain Documentation</a>

      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/news/">News</a><a class="page-link" href="/howto/">How To</a><a class="page-link" href="/links/">Useful Links</a><a class="page-link" href="/authors/">Authors</a><!-- HTML elements for search -->
          <input type="text" id="search-input" placeholder="Search" />
          
          <ul id="results-container"></ul>

          <script src="/assets/javascript/search.js"></script>
          <script>
            var sjs = SimpleJekyllSearch({
              searchInput: document.getElementById('search-input'),
              resultsContainer: document.getElementById('results-container'),
              json: '/search.json'
            })
          </script>
          <!-- <form style="float: right;" class="form-inline" method="get" action="http://www.google.com/search">
            <input type="hidden" name="sitesearch" value="hivedocs.info" />
            <input type="text" name="q" maxlength="255" placeholder="Search" />
          </form> -->
          
          <!-- <a href="#" onclick="try { $('#authors-container').slideToggle(); } catch { document.getElementById('authors-container').style.display = 'block'; }; return false;">Authors &#187;</a>
          <a href="#" onclick="try { $('#topics-container').slideToggle(); } catch { document.getElementById('topics-container').style.display = 'block'; }; return false;">Topics &#187;</a> -->
          
          <a href="#topics-container" rel="modal:open">Topics &#187;</a>
          
          <div id="topics-container" class="modal">
            <h3>Topics</h3>
            <ul><li><a class="page-link" href="/account-recovery/"><nobr>Account Recovery</nobr></a></li><li><a class="page-link" href="/core-development/"><nobr>Core Development</nobr></a></li><li><a class="page-link" href="/dapps/"><nobr>Dapps</nobr></a></li><li><a class="page-link" href="/docker/"><nobr>Docker</nobr></a></li><li><a class="page-link" href="/hardfork/"><nobr>Hardfork</nobr></a></li><li><a class="page-link" href="/hivemind/"><nobr>Hivemind</nobr></a></li><li><a class="page-link" href="/javascript/"><nobr>Javascript</nobr></a></li><li><a class="page-link" href="/multisig/"><nobr>Multisig</nobr></a></li><li><a class="page-link" href="/python/"><nobr>Python</nobr></a></li><li><a class="page-link" href="/ruby/"><nobr>Ruby</nobr></a></li><li><a class="page-link" href="/testnet/"><nobr>Testnet</nobr></a></li><li><a class="page-link" href="/tools/"><nobr>Tools</nobr></a></li><li><a class="page-link" href="/witness/"><nobr>Witness</nobr></a></li></ul>
          </div>
        </div>
      </nav>
  </div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <div class="pull-right well">
      <img src="https://images.hive.blog/u/themarkymark/avatar" width="128" height="128" class="lazyload" />
    </div>
    
    <h1 class="post-title p-name" itemprop="name headline">How to update your witness to hardfork 26 release canidate 4 (Updated)</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2022-10-04T23:37:42-07:00" itemprop="datePublished">Oct 4, 2022
      </time>â€¢ <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">
          <a href="/authors/#author-themarkymark">themarkymark</a>
        </span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <div id="content-themarkymark-how-to-update-your-witness-to-hardfork-26-release-canidate-3">![image.png](https://files.peakd.com/file/peakd-hive/themarkymark/23uQp8Fg9jkJ2ASGE4ka7X5h1gh3RGZMxEVPa7TimKw4R7UmYbZ1JB38WEZzg9dnuLDF1.png)

**Update: Release canidate 4 has been released to fix an issue with rc delegations.  Post has been updated to reflect this.**


Hardfork 26 is right around the corner and offers a lot of improvements.  Many of which dramatically improve scalability and performance.  

Some of the improvements include:

* One Block Irreversibility 
* Increasing HBD haircut ratio
* Allow more than one vote per block
* Remove vote change penalty
* Support for block log compression
* Peer to peer performance improvements
* Resource credit overhaul
* Resource credit delegation
* General improvements to improve operation handling

As of right now, the hardfork is schedule for October 11th.  This may change if anything comes up, as of right now we are on target.

It is officially considered safe to run hardfork 26 release candidate 4 on your backup and producing nodes.  Due to the time it takes to replay aa node, you may want to consider getting at least one of your witness nodes on rc4.  I'm going to walk you through how to do this.  

---

## <center>Installing hived release candidate 4</center>

---

#### Install Operating System

Previous versions of hived generally recommended using Ubuntu 18.04, although it was possible to get newer version of Ubuntu working.  With hardfork 26, it is recommend you run Ubuntu 22.04.

I generally never would recommend raid 0 for anything, but in this case it is safe to use raid 0 if you need the disk space as everything is replacable.  

**If this is your only witness node, I wouldn't recommend raid 0 as it will introduce a small amount of downtime risk.**

You will need around 400G of space to maintain a hf26 witness.  Although you will need almost 1TB more if you need to compress an existing block log or you need to download one.  I would recommend a minimum of 1TB, ideally more if you want to back up your block_log and move in new ones.

---
#### Install Packages

```
apt-get install -y \
autoconf \
automake \
autotools-dev \
build-essential \
cmake \
doxygen \
git \
libboost-all-dev \
libyajl-dev \
libreadline-dev \
libssl-dev \
libtool \
liblz4-tool \
ncurses-dev \
python3 \
python3-dev \
python3-jinja2 \
python3-pip \
libgflags-dev \
libsnappy-dev \
zlib1g-dev \
libbz2-dev \
liblz4-dev \
libzstd-dev \
ninja-build \
```

I would also recommend installing chrony, an improved ntp client.

```
apt install chrony
```

---
#### Clone Repo

You will need to clone the git repo for hived.  

```
git clone https://github.com/openhive-network/hive
```

---
#### Check out release canidate 4

```
ver='v1.26.0rc4'
cd hive &amp;&amp; git fetch &amp;&amp; git checkout $ver
```

---
#### Grab submodules

```
git submodule update --init --recursive
```

---
#### Make build directory

```
mkdir -p ~/build-$ver &amp;&amp; cd ~/build-$ver
```

---
#### Run make

```
cmake -DCMAKE_BUILD_TYPE=Release -G Ninja ../hive
```

---
#### Compile

```
ninja
```

This command will try to compile with all cores available on your machine.

---
#### Move executables to bin folder

```
ninja install
```

---
#### Confirm version

```
hived --version
```

You should see the following:

```
"version":{"blockchain_version":"1.26.0","hive_revision":"ade84a4dfa0750235fcbe8ba910a5b45387f0274","fc_revision":"ade84a4dfa0750235fcbe8ba910a5b45387f0274"}
```
---

---
#### Compress Block Log (Optional)

One of the great features of harfork26 is using compressed block log.  This drastically reduces the space needed for hived.  

* hardfork25 block_log: 673G
* hardfork26 block_log: 350G

If you have an uncompressed block log file, you can compress it with the **compress_block_log** utility.  

You will need to create the folder compressed ahead of time.

```
compress_block_log -j16 --benchmark-decompression -i witness_node_data_dir/blockchain -o witness_node_data_dir/blockchain/compressed
```

Notice you only point to the blockchain folder and not the block_log file.

If you do compress your block log, you will need to copy the block_log and block_log.artifacts files from the compressed folder to the blockchain folder overwriting any previous block_log file.  You should delete block_log.index if you have one there.

I have noticed the compression will create two artifact files, one in the input folder of the old block log and one in the new compressed folder.  Delete the following files in the original folder 

* block_log
* block_log.index
* block_log.artifacts

From the new compressed folder, you will copy the block_log and block_log.artifacts to the original witness_node_dir/blockchain.  

Going forward, there will no longer be a block_log.index, it is replaced with the block_log.artifacts.

---
#### Config.ini

If you have an existing config.ini from a previous witness node, just give a once over and make sure everything looks good.  

If this is not your only witness node, be 100% sure you are not using the same signing key on any other witness or you will double sign.  

If you need to create a new key, use the cli-wallet "suggest_brain_key" command.  This will create a unique public &amp; private key you can use for signing your witness.  Keep this safe, you will need the private key in your config.ini file.  You will need the public key when switching active witnesses.

---
#### Start Screen session

You will want to either use **screen** or **tmux** to prevent your node from shutting down when you close SSH.  Tmux is nicer, but screen is has logging built-in without a plug-in.

I recommend starting a named session, as well as enabling logging.

```
screen -S witness -L -Logfile witness.log
```

This will start a new terminal that will remain running when you close SSH.  It will also log all activity to a file so you can easily monitor errors and troubleshoot problems.

You can detach from a screen session using Control-A + D, but I usually just close the SSH session.

You can always reconnect to your screen session to shutdown your node using:

```
screen -r witness
```

---
#### Start Replay

At this point you either have no block_log file and are going to do a full replay from scratch or you compressed an existing block_log and will start your replay with it.

From your screen session, start the replay.

```
./bin/hived
```

You can speed up the replay by providing a checkpoint.  This is a combination of a block number and block id.  You can find this information from hiveblocks.com.  For example, using the current block as our target you would add the following argument.

```
./bin/hived --checkpoint [68492031,04151aff878fe5945aca7f4e9052044ecf743875]
```

This will reduce the amount of work needed to be done as it knows the hash of the checkpoint block.

---
#### Expectations

I've done some testing with replay and compression.  

Replaying without an existing block log took me 24.3 hours to complete on a Ryzen 3600 with Raid 0 2xNVME drives.

Compressing an existing block log file on Raid 0 2xNVME drives with an Intel i7 8700 took around 3.4 hours.

A compressed block log is currently 363G with a 1.6G artifact file.  If you compress an existing block_log I have noticed it to be around 10% smaller than creating it through a full sync.

I haven't tested a replay using a compressed block log, but from what I gather it should take around 8-10 hours, plus the time to download and compress the block log. 

---

<center>https://steemitimages.com/DQmcWxV1dpA1eAtw2ipwZiWZkydyVNU5LaLa2Ak1GUnbGmS/The-Marky-Mark.png </center>

[![](https://steemitimages.com/DQmPkQhAQceC7aHr4Gy5GKv7LMoiy47P7PyaNCeZBHMpFke/white-bg-with-drop-shadow.gif)](https://hivesigner.com/sign/account-witness-vote?witness=themarkymark&amp;approve=1)   

Posted Using [LeoFinance <sup>Beta</sup>](https://leofinance.io/@themarkymark/how-to-update-your-witness-to-hardfork-26-release-canidate-3)</div>
<script crossorigin="anonymous" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>

<script src="https://unpkg.com/steem-content-renderer"></script>

<!-- <script src="https://cdn.jsdelivr.net/npm/hive-content-renderer/dist/hive-content-renderer.min.js"></script> -->
<script>
  $(document).ready(function() {
    try {
      const renderer = new SteemContentRenderer.DefaultRenderer({
      // const renderer = new HiveContentRenderer({
        baseUrl: "https://hive.blog/",
        breaks: true,
        skipSanitization: false,
        allowInsecureScriptTags: false,
        addNofollowToLinks: true,
        doNotShowImages: false,
        ipfsPrefix: "",
        assetsWidth: 640,
        assetsHeight: 480,
        imageProxyFn: (url) => url,
        usertagUrlFn: (account) => "/@themarkymark",
        hashtagUrlFn: (hashtag) => "/how-to-update-your-witness-to-hardfork-26-release-canidate-3",
        isLinkSafeFn: (url) => true,
      });
      
      const inputElem = $('#content-themarkymark-how-to-update-your-witness-to-hardfork-26-release-canidate-3').html();
      const outputElem = $('#content-themarkymark-how-to-update-your-witness-to-hardfork-26-release-canidate-3');
      const output = renderer.render(inputElem);
      
      outputElem.html(output);
    } catch(e) {
      console.log(e);
    }
  });
</script>

<style>
  #content-themarkymark-how-to-update-your-witness-to-hardfork-26-release-canidate-3 {
    padding: 0 3rem;
    color: #444444;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    font-size: 16px;
    line-height: 1.8;
    text-shadow: 0 1px 0 #ffffff;
    padding: 0.5rem;
  }
  #content-themarkymark-how-to-update-your-witness-to-hardfork-26-release-canidate-3 code {
    background: white;
  }
  #content-themarkymark-how-to-update-your-witness-to-hardfork-26-release-canidate-3 a {
    border-bottom: 1px solid #444444; color: #444444; text-decoration: none;
  }
  #content-themarkymark-how-to-update-your-witness-to-hardfork-26-release-canidate-3 a:hover {
    border-bottom: 0;
  }
  #content-themarkymark-how-to-update-your-witness-to-hardfork-26-release-canidate-3 h1 {
    font-size: 2.2em;
  }
  #content-themarkymark-how-to-update-your-witness-to-hardfork-26-release-canidate-3 h2, h3, h4, h5 {
    margin-bottom: 0;
  }
  #content-themarkymark-how-to-update-your-witness-to-hardfork-26-release-canidate-3 header small {
    color: #999;
    font-size: 50%;
  }
  #content-themarkymark-how-to-update-your-witness-to-hardfork-26-release-canidate-3 img {
    max-width: 100%;
  }
</style>

<hr />

<p>
  See: <a href="https://leofinance.io/@themarkymark/how-to-update-your-witness-to-hardfork-26-release-canidate-3">How to update your witness to hardfork 26 release canidate 4 (Updated)</a>
  by
  <a href="https://hive.blog/@themarkymark">@themarkymark</a>
</p>


  </div><a class="u-url" href="/howto/witness/node/2022/10/04/how-to-update-your-witness-to-hardfork-26-release-canidate-3.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading"><a rel="author" href="/">Hive Chain Documentation</a></h2>
    
    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">site curated by: @inertia</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Your resource for various levels of Hive Documentation.</p>
      </div>
    </div>
  </div>

</footer>
</body>

</html>
