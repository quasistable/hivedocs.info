<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="og:image" content="/assets/images/sticker.png" /><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>How to set up your Witness server with MIRA? | Hive Chain Documentation</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="How to set up your Witness server with MIRA?" />
<meta name="author" content="deathwing" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="*** Hello there, as you may or may not know the server requirements for hosting a witness server is growing very fast. To combat this, with the recent hardforks to the blockchain MIRA was introduced. MIRA caches the data on RocksDB files rather than the random acces memory, RAM. Which means you will require a higher storage with fast R/W speeds like SSDs for example. Instead of 64 GB of RAM. Right now, as of today (**02.04.2020**) the **absolute minimum** requirements for a MIRA node is 8 Gigabytes of RAM, 400GB SSD Storage, 4 cores, 100 Mbps DL/UL speed. The **recommended** specifications for a MIRA witness/seed node is 32 Gigabytes of RAM, 500GB SSD Storage, 4 cores, 1 Gbps DL/UL speed. Block logs currently take about **258 GB** of space while RocksDB takes about **37 GB**. ![](https://i.imgur.com/5KTmBrV.png) Witnesses are of course, crucial to the longevity, stability and decentralization of the chain. If you wan to create a witness server and become a witness, good for you and thank you for volunteering! Managing servers and keeping tabs on them is no easy feat. Lets not forget to mention, cheap. ### Start Setting Up Your Witness On A Fresh Install [DIY] So you have decided on setting up a witness server using MIRA. You have your server ready, freshly installed. Preferably Ubuntu or Debian, but that&#39;s just my taste. For the setup, we will be using steem-docker made by someguy123 and RocksDB files provided by [Privex.io](privex.io) Let&#39;s get started. Throughout this tutorial, I will be assuming you are `root`. First, we have to install git so we can use `git clone` to get the necessary files from GitHub. `apt install git -y` Now, we clone the repository from GitHub. `git clone https://github.com/someguy123/steem-docker.git` Now that `git` has downloaded the repository to your server, we have to `cd` into the folder. `cd steem-docker` Next, we are going to use the custom-made script to install `docker` for us. `./run.sh install_docker` This will probably take a minute. Next, we will be installing the necessary docker package. `./run.sh install someguy123/hive:latest-mira` Next, we will be setting up the .env for docker. `nano .env` ``` DOCKER_NAME=witness PORTS= ``` Paste these in the .env file and save it by pressing CTRL+X and then Y. Next step is to download the block_log. ``` mkdir root/data/witness_node_data_dir/blockchain cd root/data/witness_node_data_dir/blockchain curl -fsSL http://files.privex.io/hive/block_log.lz4 -o - | lz4 -d - block_log ``` As the block_log is quite big, this is going to take anywhere from 20 minutes to several hours depending on the internet connection of your server. After the block_log has been installed, we have to download the RocksDB files from Privex.io For HIVE, `rsync -av --progress --delete rsync://files.privex.io/hive/rocksdb/ /root/steem-docker/data/rocksdb/` Now that our RocksDB is downloaded, we must generate a brain key for security. ``` cd root/steem-docker ./run.sh remote_wallet suggest_brain_key ``` ![](https://i.imgur.com/oP0tCAy.png) This will generate a key pair for your witness. Copy the output and save it. After generating your witness keys we must edit `config.ini` which is the main configuration for the witness server. `nano root/steem-docker/data/witness_node_data_dir/config.ini` On the first line, you will see `p2p-endpoint` we should comment this out as our goal is to make a witness server, if you are looking to host a seed node rather than a witness server, you can keep this on. You can comment this out by putting a pound (#) in front of the line. So it should look like this, `#p2p-endpoint = 0.0.0.0:2001` Next, a few lines below that you will see, `shared-file-size = 64G` Please change this to your server memory, if your server has 16 gigabytes of RAM, change this to 16G and so on. Next, scroll down until you see `witness` and `private-key` lines. For the witness part, put in your username with &quot;&quot; it should look like this, `witness = &quot;deathwing&quot;` Next, for the private key put in your previously saved private key without any quotation marks. `private-key = 5thisisyourpreviosulygeneratedprivatekey` ![](https://i.imgur.com/z8DDsT1.png) Again, press CTRL+X and then Y to save the file and exit. You are almost done! Our next step is to replay the chain, this is going to take quite a long time as this process is single-threaded and can&#39;t take advantage of multi-core CPUs, so depending on your processors&#39; single-thread performance, the amount of time it takes will vary. Very likely for it to take an hour if not more. `./run.sh replay` After the replay is complete, we can start our server and let it sync with the network. `./run.sh start` You can then use `./run.sh logs` to view the log output. It is very normal to see errors appearing here from time to time. You should check it every 20-30 minutes until you see something like this: ![](https://i.imgur.com/sCSVd8y.png) When you start seeing these messages, you can press CTRL+C to leave the logs. Now that our witness server is synced up and ready to go, we can update our witness account and broadcast it to the network. To do that, we need to run wallet. `./run.sh wallet` The wallet will prompt you to set a password. ``` set_password hunter2 (set your own password) unlock hunter2 import_key 5yourwitnessaccountsactiveprivatekey ``` You can find your private key on PeakD - https://peakd.com/@yourusername/permissions ![](https://i.imgur.com/lCrGKoc.png) Remember that for `import_key` you need to put in the private key of the account that will be witnessing on the chain **not** the one previously generated in this tutorial. Now, we can update our witness and start our journey on supporting the stability, longevity and decentralization of the blockchain. ``` update_witness &quot;WITNESSNAME&quot; &quot;WITNESSURL&quot; &quot;STMxxxxxxx&quot; {&quot;account_creation_fee&quot;:&quot;3.000 HIVE&quot;,&quot;maximum_block_size&quot;:65536,&quot;sbd_interest_rate&quot;:0} true ``` `WITNESSNAME` = Your Witness account. `WITNESSURL` = Preferably, your witness announcement post. `STMxxxxxxx`= Paste the key that we previously generated. You can check **hiveblocks.com/@yourusername** now, if everything worked you should see a transaction like this; ![](https://i.imgur.com/1JoL29X.png) Congratulations! You are now a witness. Thank you! ### I want to become a witness but I don&#39;t know a thing about servers! Best way to become a witness in a situation like this is probably purchasing a pre-replayed witness node from [privex.io](privex.io) who provided both the scripts and files used in this tutorial. This option is the best for users who do not have a good server knowledge and want excellent customer support and during their journey on becoming a witness. After you order your VPS-HIVE server from, you should receive a mail containing the information you need to connect and login to the server. After you log in, what you have to do is first, switch from the user `ubuntu` to `root`, to do this type, `su` Then, we will be generating a key pair using ``` ./run.sh remote_wallet suggest_brain_key ``` then, edit the `config.ini` file with `nano data/witness_node_data_dir/config.ini` ![](https://i.imgur.com/6eJ7jfU.png) then start the witness server with `./run.sh start` wait for it to sync, then run wallet with `./run.sh wallet` and update your witness as shown previously. Let me know if you have any questions! _____ post scriptum ![image.png](https://files.peakd.com/file/peakd-hive/deathwing/Y9KDqlV8-image.png) Remember voting for witnesses is important. I would appreciate if you could vote for me. Use Peakd&#39;s voting page by clicking [here](https://peakd.com/witnesses). Use Hivesigner by clicking [here](https://deathwing.me/witness). Thank you! See: How to set up your Witness server with MIRA? by @deathwing" />
<meta property="og:description" content="*** Hello there, as you may or may not know the server requirements for hosting a witness server is growing very fast. To combat this, with the recent hardforks to the blockchain MIRA was introduced. MIRA caches the data on RocksDB files rather than the random acces memory, RAM. Which means you will require a higher storage with fast R/W speeds like SSDs for example. Instead of 64 GB of RAM. Right now, as of today (**02.04.2020**) the **absolute minimum** requirements for a MIRA node is 8 Gigabytes of RAM, 400GB SSD Storage, 4 cores, 100 Mbps DL/UL speed. The **recommended** specifications for a MIRA witness/seed node is 32 Gigabytes of RAM, 500GB SSD Storage, 4 cores, 1 Gbps DL/UL speed. Block logs currently take about **258 GB** of space while RocksDB takes about **37 GB**. ![](https://i.imgur.com/5KTmBrV.png) Witnesses are of course, crucial to the longevity, stability and decentralization of the chain. If you wan to create a witness server and become a witness, good for you and thank you for volunteering! Managing servers and keeping tabs on them is no easy feat. Lets not forget to mention, cheap. ### Start Setting Up Your Witness On A Fresh Install [DIY] So you have decided on setting up a witness server using MIRA. You have your server ready, freshly installed. Preferably Ubuntu or Debian, but that&#39;s just my taste. For the setup, we will be using steem-docker made by someguy123 and RocksDB files provided by [Privex.io](privex.io) Let&#39;s get started. Throughout this tutorial, I will be assuming you are `root`. First, we have to install git so we can use `git clone` to get the necessary files from GitHub. `apt install git -y` Now, we clone the repository from GitHub. `git clone https://github.com/someguy123/steem-docker.git` Now that `git` has downloaded the repository to your server, we have to `cd` into the folder. `cd steem-docker` Next, we are going to use the custom-made script to install `docker` for us. `./run.sh install_docker` This will probably take a minute. Next, we will be installing the necessary docker package. `./run.sh install someguy123/hive:latest-mira` Next, we will be setting up the .env for docker. `nano .env` ``` DOCKER_NAME=witness PORTS= ``` Paste these in the .env file and save it by pressing CTRL+X and then Y. Next step is to download the block_log. ``` mkdir root/data/witness_node_data_dir/blockchain cd root/data/witness_node_data_dir/blockchain curl -fsSL http://files.privex.io/hive/block_log.lz4 -o - | lz4 -d - block_log ``` As the block_log is quite big, this is going to take anywhere from 20 minutes to several hours depending on the internet connection of your server. After the block_log has been installed, we have to download the RocksDB files from Privex.io For HIVE, `rsync -av --progress --delete rsync://files.privex.io/hive/rocksdb/ /root/steem-docker/data/rocksdb/` Now that our RocksDB is downloaded, we must generate a brain key for security. ``` cd root/steem-docker ./run.sh remote_wallet suggest_brain_key ``` ![](https://i.imgur.com/oP0tCAy.png) This will generate a key pair for your witness. Copy the output and save it. After generating your witness keys we must edit `config.ini` which is the main configuration for the witness server. `nano root/steem-docker/data/witness_node_data_dir/config.ini` On the first line, you will see `p2p-endpoint` we should comment this out as our goal is to make a witness server, if you are looking to host a seed node rather than a witness server, you can keep this on. You can comment this out by putting a pound (#) in front of the line. So it should look like this, `#p2p-endpoint = 0.0.0.0:2001` Next, a few lines below that you will see, `shared-file-size = 64G` Please change this to your server memory, if your server has 16 gigabytes of RAM, change this to 16G and so on. Next, scroll down until you see `witness` and `private-key` lines. For the witness part, put in your username with &quot;&quot; it should look like this, `witness = &quot;deathwing&quot;` Next, for the private key put in your previously saved private key without any quotation marks. `private-key = 5thisisyourpreviosulygeneratedprivatekey` ![](https://i.imgur.com/z8DDsT1.png) Again, press CTRL+X and then Y to save the file and exit. You are almost done! Our next step is to replay the chain, this is going to take quite a long time as this process is single-threaded and can&#39;t take advantage of multi-core CPUs, so depending on your processors&#39; single-thread performance, the amount of time it takes will vary. Very likely for it to take an hour if not more. `./run.sh replay` After the replay is complete, we can start our server and let it sync with the network. `./run.sh start` You can then use `./run.sh logs` to view the log output. It is very normal to see errors appearing here from time to time. You should check it every 20-30 minutes until you see something like this: ![](https://i.imgur.com/sCSVd8y.png) When you start seeing these messages, you can press CTRL+C to leave the logs. Now that our witness server is synced up and ready to go, we can update our witness account and broadcast it to the network. To do that, we need to run wallet. `./run.sh wallet` The wallet will prompt you to set a password. ``` set_password hunter2 (set your own password) unlock hunter2 import_key 5yourwitnessaccountsactiveprivatekey ``` You can find your private key on PeakD - https://peakd.com/@yourusername/permissions ![](https://i.imgur.com/lCrGKoc.png) Remember that for `import_key` you need to put in the private key of the account that will be witnessing on the chain **not** the one previously generated in this tutorial. Now, we can update our witness and start our journey on supporting the stability, longevity and decentralization of the blockchain. ``` update_witness &quot;WITNESSNAME&quot; &quot;WITNESSURL&quot; &quot;STMxxxxxxx&quot; {&quot;account_creation_fee&quot;:&quot;3.000 HIVE&quot;,&quot;maximum_block_size&quot;:65536,&quot;sbd_interest_rate&quot;:0} true ``` `WITNESSNAME` = Your Witness account. `WITNESSURL` = Preferably, your witness announcement post. `STMxxxxxxx`= Paste the key that we previously generated. You can check **hiveblocks.com/@yourusername** now, if everything worked you should see a transaction like this; ![](https://i.imgur.com/1JoL29X.png) Congratulations! You are now a witness. Thank you! ### I want to become a witness but I don&#39;t know a thing about servers! Best way to become a witness in a situation like this is probably purchasing a pre-replayed witness node from [privex.io](privex.io) who provided both the scripts and files used in this tutorial. This option is the best for users who do not have a good server knowledge and want excellent customer support and during their journey on becoming a witness. After you order your VPS-HIVE server from, you should receive a mail containing the information you need to connect and login to the server. After you log in, what you have to do is first, switch from the user `ubuntu` to `root`, to do this type, `su` Then, we will be generating a key pair using ``` ./run.sh remote_wallet suggest_brain_key ``` then, edit the `config.ini` file with `nano data/witness_node_data_dir/config.ini` ![](https://i.imgur.com/6eJ7jfU.png) then start the witness server with `./run.sh start` wait for it to sync, then run wallet with `./run.sh wallet` and update your witness as shown previously. Let me know if you have any questions! _____ post scriptum ![image.png](https://files.peakd.com/file/peakd-hive/deathwing/Y9KDqlV8-image.png) Remember voting for witnesses is important. I would appreciate if you could vote for me. Use Peakd&#39;s voting page by clicking [here](https://peakd.com/witnesses). Use Hivesigner by clicking [here](https://deathwing.me/witness). Thank you! See: How to set up your Witness server with MIRA? by @deathwing" />
<link rel="canonical" href="https://peakd.com/witness-category/@deathwing/how-to-set-up-your-witness-server-with-mira" />
<meta property="og:url" content="https://peakd.com/witness-category/@deathwing/how-to-set-up-your-witness-server-with-mira" />
<meta property="og:site_name" content="Hive Chain Documentation" />
<meta property="og:image" content="https://files.peakd.com/file/peakd-hive/deathwing/Y9KDqlV8-image.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-04-01T17:30:33-07:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://files.peakd.com/file/peakd-hive/deathwing/Y9KDqlV8-image.png" />
<meta property="twitter:title" content="How to set up your Witness server with MIRA?" />
<script type="application/ld+json">
{"description":"*** Hello there, as you may or may not know the server requirements for hosting a witness server is growing very fast. To combat this, with the recent hardforks to the blockchain MIRA was introduced. MIRA caches the data on RocksDB files rather than the random acces memory, RAM. Which means you will require a higher storage with fast R/W speeds like SSDs for example. Instead of 64 GB of RAM. Right now, as of today (**02.04.2020**) the **absolute minimum** requirements for a MIRA node is 8 Gigabytes of RAM, 400GB SSD Storage, 4 cores, 100 Mbps DL/UL speed. The **recommended** specifications for a MIRA witness/seed node is 32 Gigabytes of RAM, 500GB SSD Storage, 4 cores, 1 Gbps DL/UL speed. Block logs currently take about **258 GB** of space while RocksDB takes about **37 GB**. ![](https://i.imgur.com/5KTmBrV.png) Witnesses are of course, crucial to the longevity, stability and decentralization of the chain. If you wan to create a witness server and become a witness, good for you and thank you for volunteering! Managing servers and keeping tabs on them is no easy feat. Lets not forget to mention, cheap. ### Start Setting Up Your Witness On A Fresh Install [DIY] So you have decided on setting up a witness server using MIRA. You have your server ready, freshly installed. Preferably Ubuntu or Debian, but that&#39;s just my taste. For the setup, we will be using steem-docker made by someguy123 and RocksDB files provided by [Privex.io](privex.io) Let&#39;s get started. Throughout this tutorial, I will be assuming you are `root`. First, we have to install git so we can use `git clone` to get the necessary files from GitHub. `apt install git -y` Now, we clone the repository from GitHub. `git clone https://github.com/someguy123/steem-docker.git` Now that `git` has downloaded the repository to your server, we have to `cd` into the folder. `cd steem-docker` Next, we are going to use the custom-made script to install `docker` for us. `./run.sh install_docker` This will probably take a minute. Next, we will be installing the necessary docker package. `./run.sh install someguy123/hive:latest-mira` Next, we will be setting up the .env for docker. `nano .env` ``` DOCKER_NAME=witness PORTS= ``` Paste these in the .env file and save it by pressing CTRL+X and then Y. Next step is to download the block_log. ``` mkdir root/data/witness_node_data_dir/blockchain cd root/data/witness_node_data_dir/blockchain curl -fsSL http://files.privex.io/hive/block_log.lz4 -o - | lz4 -d - block_log ``` As the block_log is quite big, this is going to take anywhere from 20 minutes to several hours depending on the internet connection of your server. After the block_log has been installed, we have to download the RocksDB files from Privex.io For HIVE, `rsync -av --progress --delete rsync://files.privex.io/hive/rocksdb/ /root/steem-docker/data/rocksdb/` Now that our RocksDB is downloaded, we must generate a brain key for security. ``` cd root/steem-docker ./run.sh remote_wallet suggest_brain_key ``` ![](https://i.imgur.com/oP0tCAy.png) This will generate a key pair for your witness. Copy the output and save it. After generating your witness keys we must edit `config.ini` which is the main configuration for the witness server. `nano root/steem-docker/data/witness_node_data_dir/config.ini` On the first line, you will see `p2p-endpoint` we should comment this out as our goal is to make a witness server, if you are looking to host a seed node rather than a witness server, you can keep this on. You can comment this out by putting a pound (#) in front of the line. So it should look like this, `#p2p-endpoint = 0.0.0.0:2001` Next, a few lines below that you will see, `shared-file-size = 64G` Please change this to your server memory, if your server has 16 gigabytes of RAM, change this to 16G and so on. Next, scroll down until you see `witness` and `private-key` lines. For the witness part, put in your username with &quot;&quot; it should look like this, `witness = &quot;deathwing&quot;` Next, for the private key put in your previously saved private key without any quotation marks. `private-key = 5thisisyourpreviosulygeneratedprivatekey` ![](https://i.imgur.com/z8DDsT1.png) Again, press CTRL+X and then Y to save the file and exit. You are almost done! Our next step is to replay the chain, this is going to take quite a long time as this process is single-threaded and can&#39;t take advantage of multi-core CPUs, so depending on your processors&#39; single-thread performance, the amount of time it takes will vary. Very likely for it to take an hour if not more. `./run.sh replay` After the replay is complete, we can start our server and let it sync with the network. `./run.sh start` You can then use `./run.sh logs` to view the log output. It is very normal to see errors appearing here from time to time. You should check it every 20-30 minutes until you see something like this: ![](https://i.imgur.com/sCSVd8y.png) When you start seeing these messages, you can press CTRL+C to leave the logs. Now that our witness server is synced up and ready to go, we can update our witness account and broadcast it to the network. To do that, we need to run wallet. `./run.sh wallet` The wallet will prompt you to set a password. ``` set_password hunter2 (set your own password) unlock hunter2 import_key 5yourwitnessaccountsactiveprivatekey ``` You can find your private key on PeakD - https://peakd.com/@yourusername/permissions ![](https://i.imgur.com/lCrGKoc.png) Remember that for `import_key` you need to put in the private key of the account that will be witnessing on the chain **not** the one previously generated in this tutorial. Now, we can update our witness and start our journey on supporting the stability, longevity and decentralization of the blockchain. ``` update_witness &quot;WITNESSNAME&quot; &quot;WITNESSURL&quot; &quot;STMxxxxxxx&quot; {&quot;account_creation_fee&quot;:&quot;3.000 HIVE&quot;,&quot;maximum_block_size&quot;:65536,&quot;sbd_interest_rate&quot;:0} true ``` `WITNESSNAME` = Your Witness account. `WITNESSURL` = Preferably, your witness announcement post. `STMxxxxxxx`= Paste the key that we previously generated. You can check **hiveblocks.com/@yourusername** now, if everything worked you should see a transaction like this; ![](https://i.imgur.com/1JoL29X.png) Congratulations! You are now a witness. Thank you! ### I want to become a witness but I don&#39;t know a thing about servers! Best way to become a witness in a situation like this is probably purchasing a pre-replayed witness node from [privex.io](privex.io) who provided both the scripts and files used in this tutorial. This option is the best for users who do not have a good server knowledge and want excellent customer support and during their journey on becoming a witness. After you order your VPS-HIVE server from, you should receive a mail containing the information you need to connect and login to the server. After you log in, what you have to do is first, switch from the user `ubuntu` to `root`, to do this type, `su` Then, we will be generating a key pair using ``` ./run.sh remote_wallet suggest_brain_key ``` then, edit the `config.ini` file with `nano data/witness_node_data_dir/config.ini` ![](https://i.imgur.com/6eJ7jfU.png) then start the witness server with `./run.sh start` wait for it to sync, then run wallet with `./run.sh wallet` and update your witness as shown previously. Let me know if you have any questions! _____ post scriptum ![image.png](https://files.peakd.com/file/peakd-hive/deathwing/Y9KDqlV8-image.png) Remember voting for witnesses is important. I would appreciate if you could vote for me. Use Peakd&#39;s voting page by clicking [here](https://peakd.com/witnesses). Use Hivesigner by clicking [here](https://deathwing.me/witness). Thank you! See: How to set up your Witness server with MIRA? by @deathwing","@type":"BlogPosting","image":"https://files.peakd.com/file/peakd-hive/deathwing/Y9KDqlV8-image.png","headline":"How to set up your Witness server with MIRA?","dateModified":"2020-04-01T17:30:33-07:00","url":"https://peakd.com/witness-category/@deathwing/how-to-set-up-your-witness-server-with-mira","datePublished":"2020-04-01T17:30:33-07:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://peakd.com/witness-category/@deathwing/how-to-set-up-your-witness-server-with-mira"},"author":{"@type":"Person","name":"deathwing"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://hivedocs.info/feed.xml" title="Hive Chain Documentation" /><script>
if(!(window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1")) {
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-161692811-1', 'auto');
  ga('send', 'pageview');
}
</script>
  
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
  
  <!-- jQuery Modal -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.css" />
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/turbolinks/5.2.0/turbolinks.js" integrity="sha256-iM4Yzi/zLj/IshPWMC1IluRxTtRjMqjPGd97TZ9yYpU=" crossorigin="anonymous"></script>
  <script src='https://unpkg.com/steem-content-renderer'></script>
  <script>
    (function () {
      if (Turbolinks.supported) {
        Turbolinks.setProgressBarDelay(500);
      }
    })();
  </script>
  <script src="/assets/javascript/universal-bridge-against-phishing.js"></script>
  <script src="/assets/javascript/lazysizes.min.js" async=""></script>
  <link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Cousine|Inconsolata" rel="stylesheet">
  <link rel="shortcut icon" type="image/png" href="/assets/images/favicon.png">
</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Hive Chain Documentation</a>

      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/news/">News</a><a class="page-link" href="/howto/">How To</a><a class="page-link" href="/links/">Useful Links</a><a class="page-link" href="/authors/">Authors</a><!-- HTML elements for search -->
          <input type="text" id="search-input" placeholder="Search" />
          
          <ul id="results-container"></ul>

          <script src="/assets/javascript/search.js"></script>
          <script>
            var sjs = SimpleJekyllSearch({
              searchInput: document.getElementById('search-input'),
              resultsContainer: document.getElementById('results-container'),
              json: '/search.json'
            })
          </script>
          <!-- <form style="float: right;" class="form-inline" method="get" action="http://www.google.com/search">
            <input type="hidden" name="sitesearch" value="hivedocs.info" />
            <input type="text" name="q" maxlength="255" placeholder="Search" />
          </form> -->
          
          <!-- <a href="#" onclick="try { $('#authors-container').slideToggle(); } catch { document.getElementById('authors-container').style.display = 'block'; }; return false;">Authors &#187;</a>
          <a href="#" onclick="try { $('#topics-container').slideToggle(); } catch { document.getElementById('topics-container').style.display = 'block'; }; return false;">Topics &#187;</a> -->
          
          <a href="#topics-container" rel="modal:open">Topics &#187;</a>
          
          <div id="topics-container" class="modal">
            <h3>Topics</h3>
            <ul><li><a class="page-link" href="/account-recovery/"><nobr>Account Recovery</nobr></a></li><li><a class="page-link" href="/core-development/"><nobr>Core Development</nobr></a></li><li><a class="page-link" href="/dapps/"><nobr>Dapps</nobr></a></li><li><a class="page-link" href="/docker/"><nobr>Docker</nobr></a></li><li><a class="page-link" href="/hardfork/"><nobr>Hardfork</nobr></a></li><li><a class="page-link" href="/hivemind/"><nobr>Hivemind</nobr></a></li><li><a class="page-link" href="/javascript/"><nobr>Javascript</nobr></a></li><li><a class="page-link" href="/multisig/"><nobr>Multisig</nobr></a></li><li><a class="page-link" href="/python/"><nobr>Python</nobr></a></li><li><a class="page-link" href="/ruby/"><nobr>Ruby</nobr></a></li><li><a class="page-link" href="/testnet/"><nobr>Testnet</nobr></a></li><li><a class="page-link" href="/tools/"><nobr>Tools</nobr></a></li><li><a class="page-link" href="/witness/"><nobr>Witness</nobr></a></li></ul>
          </div>
        </div>
      </nav>
  </div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <div class="pull-right well">
      <img src="https://images.hive.blog/u/deathwing/avatar" width="128" height="128" class="lazyload" />
    </div>
    
    <h1 class="post-title p-name" itemprop="name headline">How to set up your Witness server with MIRA?</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2020-04-01T17:30:33-07:00" itemprop="datePublished">Apr 1, 2020
      </time>• <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">
          <a href="/authors/#author-deathwing">deathwing</a>
        </span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <div id="content-deathwing-how-to-set-up-your-witness-server-with-mira">

***

Hello there, as you may or may not know the server requirements for hosting a witness server is growing very fast. To combat this, with the recent hardforks to the blockchain MIRA was introduced.

MIRA caches the data on RocksDB files rather than the random acces memory, RAM. Which means you will require a higher storage with fast R/W speeds like SSDs for example. Instead of 64 GB of RAM.

Right now, as of today (**02.04.2020**) the **absolute minimum** requirements for a MIRA node is 8 Gigabytes of RAM, 400GB SSD Storage, 4 cores, 100 Mbps DL/UL speed.

The **recommended** specifications for a MIRA witness/seed node is 32 Gigabytes of RAM, 500GB SSD Storage, 4 cores, 1 Gbps DL/UL speed.

Block logs currently take about **258 GB** of space while RocksDB takes about **37 GB**.

![](https://i.imgur.com/5KTmBrV.png)

Witnesses are of course, crucial to the longevity, stability and decentralization of the chain. If you wan to create a witness server and become a witness, good for you and thank you for volunteering! Managing servers and keeping tabs on them is no easy feat. Lets not forget to mention, cheap.

### Start Setting Up Your Witness On A Fresh Install [DIY]

So you have decided on setting up a witness server using MIRA. You have your server ready, freshly installed. Preferably Ubuntu or Debian, but that's just my taste. 

For the setup, we will be using steem-docker made by someguy123 and RocksDB files provided by [Privex.io](privex.io)

Let's get started. Throughout this tutorial, I will be assuming you are `root`.

First, we have to install git so we can use `git clone` to get the necessary files from GitHub.

`apt install git -y`

Now, we clone the repository from GitHub.

`git clone https://github.com/someguy123/steem-docker.git`

Now that `git` has downloaded the repository to your server, we have to `cd` into the folder.

`cd steem-docker`

Next, we are going to use the custom-made script to install `docker` for us.

`./run.sh install_docker`

This will probably take a minute.

Next, we will be installing the necessary docker package.

`./run.sh install someguy123/hive:latest-mira`

Next, we will be setting up the .env for docker.

`nano .env`


```
DOCKER_NAME=witness
PORTS=
```

Paste these in the .env file and save it by pressing CTRL+X and then Y.

Next step is to download the block_log.

```
mkdir root/data/witness_node_data_dir/blockchain
cd root/data/witness_node_data_dir/blockchain
curl -fsSL http://files.privex.io/hive/block_log.lz4 -o - | lz4 -d - block_log
```


As the block_log is quite big, this is going to take anywhere from 20 minutes to several hours depending on the internet connection of your server. 

After the block_log has been installed, we have to download the RocksDB files from Privex.io

For HIVE,

`rsync -av --progress --delete rsync://files.privex.io/hive/rocksdb/ /root/steem-docker/data/rocksdb/`


Now that our RocksDB is downloaded, we must generate a brain key for security. 

```
cd root/steem-docker
./run.sh remote_wallet
suggest_brain_key
```

![](https://i.imgur.com/oP0tCAy.png)


This will generate a key pair for your witness. Copy the output and save it.


After generating your witness keys we must edit `config.ini` which is the main configuration for the witness server.

`nano root/steem-docker/data/witness_node_data_dir/config.ini`

On the first line, you will see `p2p-endpoint` we should comment this out as our goal is to make a witness server, if you are looking to host a seed node rather than a witness server, you can keep this on.

You can comment this out by putting a pound (#) in front of the line. So it should look like this,

`#p2p-endpoint = 0.0.0.0:2001`

Next, a few lines below that you will see,

`shared-file-size = 64G`

Please change this to your server memory, if your server has 16 gigabytes of RAM, change this to 16G and so on.

Next, scroll down until you see `witness` and `private-key` lines.

For the witness part, put in your username with "" it should look like this,

`witness = "deathwing"`

Next, for the private key put in your previously saved private key without any quotation marks.

`private-key = 5thisisyourpreviosulygeneratedprivatekey`

![](https://i.imgur.com/z8DDsT1.png)


Again, press CTRL+X and then Y to save the file and exit.

You are almost done!

Our next step is to replay the chain, this is going to take quite a long time as this process is single-threaded and can't take advantage of multi-core CPUs, so depending on your processors' single-thread performance, the amount of time it takes will vary. Very likely for it to take an hour if not more.

`./run.sh replay`

After the replay is complete, we can start our server and let it sync with the network.

`./run.sh start`

You can then use `./run.sh logs` to view the log output. It is very normal to see errors appearing here from time to time. You should check it every 20-30 minutes until you see something like this:

![](https://i.imgur.com/sCSVd8y.png)

When you start seeing these messages, you can press CTRL+C to leave the logs.

Now that our witness server is synced up and ready to go, we can update our witness account and broadcast it to the network. To do that, we need to run wallet.

`./run.sh wallet`

The wallet will prompt you to set a password. 

```
set_password hunter2 (set your own password)
unlock hunter2
import_key 5yourwitnessaccountsactiveprivatekey
```

You can find your private key on PeakD - https://peakd.com/@yourusername/permissions

![](https://i.imgur.com/lCrGKoc.png)


Remember that for `import_key` you need to put in the private key of the account that will be witnessing on the chain **not** the one previously generated in this tutorial.

Now, we can update our witness and start our journey on supporting the stability, longevity and decentralization of the blockchain.

```
update_witness "WITNESSNAME" "WITNESSURL" "STMxxxxxxx" {"account_creation_fee":"3.000 HIVE","maximum_block_size":65536,"sbd_interest_rate":0} true
```

`WITNESSNAME` = Your Witness account.
`WITNESSURL` = Preferably, your witness announcement post.
`STMxxxxxxx`= Paste the key that we previously generated.

You can check **hiveblocks.com/@yourusername** now, if everything worked you should see a transaction like this;

![](https://i.imgur.com/1JoL29X.png)

Congratulations! You are now a witness. Thank you!



### I want to become a witness but I don't know a thing about servers!

Best way to become a witness in a situation like this is probably purchasing a pre-replayed witness node from [privex.io](privex.io) who provided both the scripts and files used in this tutorial. This option is the best for users who do not have a good server knowledge and want excellent customer support and during their journey on becoming a witness.

After you order your VPS-HIVE server from, you should receive a mail containing the information you need to connect and login to the server.

After you log in, what you have to do is first, switch from the user `ubuntu` to `root`, to do this type,

`su`

Then, we will be generating a key pair using 

```
./run.sh remote_wallet
suggest_brain_key
```

then, edit the `config.ini` file with `nano data/witness_node_data_dir/config.ini` ![](https://i.imgur.com/6eJ7jfU.png)

then start the witness server with 

`./run.sh start` wait for it to sync, 

then run wallet with `./run.sh wallet` and update your witness as shown previously.


Let me know if you have any questions!

_____
<sub>post scriptum</sub>
<center>![image.png](https://files.peakd.com/file/peakd-hive/deathwing/Y9KDqlV8-image.png)

Remember voting for witnesses is important. I would appreciate if you could vote for me.

Use Peakd's voting page by clicking [here](https://peakd.com/witnesses).
Use Hivesigner by clicking [here](https://deathwing.me/witness).

Thank you!</center>


</div>
<script crossorigin="anonymous" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>

<script src="https://unpkg.com/steem-content-renderer"></script>

<!-- <script src="https://cdn.jsdelivr.net/npm/hive-content-renderer/dist/hive-content-renderer.min.js"></script> -->
<script>
  $(document).ready(function() {
    try {
      const renderer = new SteemContentRenderer.DefaultRenderer({
      // const renderer = new HiveContentRenderer({
        baseUrl: "https://hive.blog/",
        breaks: true,
        skipSanitization: false,
        allowInsecureScriptTags: false,
        addNofollowToLinks: true,
        doNotShowImages: false,
        ipfsPrefix: "",
        assetsWidth: 640,
        assetsHeight: 480,
        imageProxyFn: (url) => url,
        usertagUrlFn: (account) => "/@deathwing",
        hashtagUrlFn: (hashtag) => "/how-to-set-up-your-witness-server-with-mira",
        isLinkSafeFn: (url) => true,
      });
      
      const inputElem = $('#content-deathwing-how-to-set-up-your-witness-server-with-mira').html();
      const outputElem = $('#content-deathwing-how-to-set-up-your-witness-server-with-mira');
      const output = renderer.render(inputElem);
      
      outputElem.html(output);
    } catch(e) {
      console.log(e);
    }
  });
</script>

<style>
  #content-deathwing-how-to-set-up-your-witness-server-with-mira {
    padding: 0 3rem;
    color: #444444;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    font-size: 16px;
    line-height: 1.8;
    text-shadow: 0 1px 0 #ffffff;
    padding: 0.5rem;
  }
  #content-deathwing-how-to-set-up-your-witness-server-with-mira code {
    background: white;
  }
  #content-deathwing-how-to-set-up-your-witness-server-with-mira a {
    border-bottom: 1px solid #444444; color: #444444; text-decoration: none;
  }
  #content-deathwing-how-to-set-up-your-witness-server-with-mira a:hover {
    border-bottom: 0;
  }
  #content-deathwing-how-to-set-up-your-witness-server-with-mira h1 {
    font-size: 2.2em;
  }
  #content-deathwing-how-to-set-up-your-witness-server-with-mira h2, h3, h4, h5 {
    margin-bottom: 0;
  }
  #content-deathwing-how-to-set-up-your-witness-server-with-mira header small {
    color: #999;
    font-size: 50%;
  }
  #content-deathwing-how-to-set-up-your-witness-server-with-mira img {
    max-width: 100%;
  }
</style>

<hr />

<p>
  See: <a href="https://peakd.com/witness-category/@deathwing/how-to-set-up-your-witness-server-with-mira">How to set up your Witness server with MIRA?</a>
  by
  <a href="https://hive.blog/@deathwing">@deathwing</a>
</p>


  </div><a class="u-url" href="/howto/witness/2020/04/01/how-to-set-up-your-witness-server-with-mira.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading"><a rel="author" href="/">Hive Chain Documentation</a></h2>
    
    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">site curated by: @inertia</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Your resource for various levels of Hive Documentation.</p>
      </div>
    </div>
  </div>

</footer>
</body>

</html>
