<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="og:image" content="/assets/images/sticker.png" /><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>JavaScript library for Ledger Nano S HIVE application | Hive Chain Documentation</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="JavaScript library for Ledger Nano S HIVE application" />
<meta name="author" content="engrave" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="In order to get official support from Ledger (i.e. the possibility to install it from Ledger Live), we need to meet several requirements. And I’m trying to fulfill them all so we could benefit from the hardware wallet support." />
<meta property="og:description" content="In order to get official support from Ledger (i.e. the possibility to install it from Ledger Live), we need to meet several requirements. And I’m trying to fulfill them all so we could benefit from the hardware wallet support." />
<link rel="canonical" href="https://peakd.com/hive-139531/@engrave/javascript-library-for-ledger-nano-s-hive-application" />
<meta property="og:url" content="https://peakd.com/hive-139531/@engrave/javascript-library-for-ledger-nano-s-hive-application" />
<meta property="og:site_name" content="Hive Chain Documentation" />
<meta property="og:image" content="https://files.peakd.com/file/peakd-hive/engrave/EowF9ezqJkPjHhLKMx9NjA82sqpuhKVddGJHDgbd5zyo9TsVhKtGc1714xmomVXPeLL" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-03-02T11:17:12-08:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://files.peakd.com/file/peakd-hive/engrave/EowF9ezqJkPjHhLKMx9NjA82sqpuhKVddGJHDgbd5zyo9TsVhKtGc1714xmomVXPeLL" />
<meta property="twitter:title" content="JavaScript library for Ledger Nano S HIVE application" />
<script type="application/ld+json">
{"description":"In order to get official support from Ledger (i.e. the possibility to install it from Ledger Live), we need to meet several requirements. And I’m trying to fulfill them all so we could benefit from the hardware wallet support.","@type":"BlogPosting","image":"https://files.peakd.com/file/peakd-hive/engrave/EowF9ezqJkPjHhLKMx9NjA82sqpuhKVddGJHDgbd5zyo9TsVhKtGc1714xmomVXPeLL","headline":"JavaScript library for Ledger Nano S HIVE application","dateModified":"2021-03-02T11:17:12-08:00","url":"https://peakd.com/hive-139531/@engrave/javascript-library-for-ledger-nano-s-hive-application","datePublished":"2021-03-02T11:17:12-08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://peakd.com/hive-139531/@engrave/javascript-library-for-ledger-nano-s-hive-application"},"author":{"@type":"Person","name":"engrave"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://hivedocs.info/feed.xml" title="Hive Chain Documentation" /><script>
if(!(window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1")) {
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-161692811-1', 'auto');
  ga('send', 'pageview');
}
</script>
  
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
  
  <!-- jQuery Modal -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.css" />
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/turbolinks/5.2.0/turbolinks.js" integrity="sha256-iM4Yzi/zLj/IshPWMC1IluRxTtRjMqjPGd97TZ9yYpU=" crossorigin="anonymous"></script>
  <script src='https://unpkg.com/steem-content-renderer'></script>
  <script>
    (function () {
      if (Turbolinks.supported) {
        Turbolinks.setProgressBarDelay(500);
      }
    })();
  </script>
  <script src="/assets/javascript/universal-bridge-against-phishing.js"></script>
  <script src="/assets/javascript/lazysizes.min.js" async=""></script>
  <link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Cousine|Inconsolata" rel="stylesheet">
  <link rel="shortcut icon" type="image/png" href="/assets/images/favicon.png">
</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Hive Chain Documentation</a>

      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/news/">News</a><a class="page-link" href="/howto/">How To</a><a class="page-link" href="/links/">Useful Links</a><a class="page-link" href="/authors/">Authors</a><!-- HTML elements for search -->
          <input type="text" id="search-input" placeholder="Search" />
          
          <ul id="results-container"></ul>

          <script src="/assets/javascript/search.js"></script>
          <script>
            var sjs = SimpleJekyllSearch({
              searchInput: document.getElementById('search-input'),
              resultsContainer: document.getElementById('results-container'),
              json: '/search.json'
            })
          </script>
          <!-- <form style="float: right;" class="form-inline" method="get" action="http://www.google.com/search">
            <input type="hidden" name="sitesearch" value="hivedocs.info" />
            <input type="text" name="q" maxlength="255" placeholder="Search" />
          </form> -->
          
          <!-- <a href="#" onclick="try { $('#authors-container').slideToggle(); } catch { document.getElementById('authors-container').style.display = 'block'; }; return false;">Authors &#187;</a>
          <a href="#" onclick="try { $('#topics-container').slideToggle(); } catch { document.getElementById('topics-container').style.display = 'block'; }; return false;">Topics &#187;</a> -->
          
          <a href="#topics-container" rel="modal:open">Topics &#187;</a>
          
          <div id="topics-container" class="modal">
            <h3>Topics</h3>
            <ul><li><a class="page-link" href="/account-recovery/"><nobr>Account Recovery</nobr></a></li><li><a class="page-link" href="/core-development/"><nobr>Core Development</nobr></a></li><li><a class="page-link" href="/dapps/"><nobr>Dapps</nobr></a></li><li><a class="page-link" href="/docker/"><nobr>Docker</nobr></a></li><li><a class="page-link" href="/hardfork/"><nobr>Hardfork</nobr></a></li><li><a class="page-link" href="/hivemind/"><nobr>Hivemind</nobr></a></li><li><a class="page-link" href="/javascript/"><nobr>Javascript</nobr></a></li><li><a class="page-link" href="/multisig/"><nobr>Multisig</nobr></a></li><li><a class="page-link" href="/python/"><nobr>Python</nobr></a></li><li><a class="page-link" href="/ruby/"><nobr>Ruby</nobr></a></li><li><a class="page-link" href="/testnet/"><nobr>Testnet</nobr></a></li><li><a class="page-link" href="/tools/"><nobr>Tools</nobr></a></li><li><a class="page-link" href="/witness/"><nobr>Witness</nobr></a></li></ul>
          </div>
        </div>
      </nav>
  </div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <div class="pull-right well">
      <img src="https://images.hive.blog/u/engrave/avatar" width="128" height="128" class="lazyload" />
    </div>
    
    <h1 class="post-title p-name" itemprop="name headline">JavaScript library for Ledger Nano S HIVE application</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2021-03-02T11:17:12-08:00" itemprop="datePublished">Mar 2, 2021
      </time>• <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">
          <a href="/authors/#author-engrave">engrave</a>
        </span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <div id="content-engrave-javascript-library-for-ledger-nano-s-hive-application">![Incoming HIVE Ledger wallet](https://files.peakd.com/file/peakd-hive/engrave/EowF9ezqJkPjHhLKMx9NjA82sqpuhKVddGJHDgbd5zyo9TsVhKtGc1714xmomVXPeLL)


It's been a couple of months since @netuoso [published the initial version of the Hive Ledger App](https://hive.blog/hive-139531/@netuoso/hive-application-for-the-ledger-nano-s-x-hardware-wallet). In order to get official support from Ledger (i.e. the possibility to install it from Ledger Live), we need to meet several requirements. And I'm trying to fulfill them all so we could benefit from the hardware wallet support.

# Code review

First, we need to make sure that the application is stable and secure. I already made a preliminary review of the app and created a Pull Request with some fixes. The next step will be to review the code from a security perspective, following the guidelines provided by Ledger. This requires a bit more work and knowledge than validating transactions serialization etc, but we will get there.

 * https://github.com/netuoso/ledger-app-hive/pull/5/

# Javascript library

To simplify communication with the ledger app, I created a JavaScript/Typescript library. It's really easy to use it with NodeJS. The library covers every functionality supported by the app.

Example usage:

```typescript
import Hive from '@engrave/ledger-app-hive';
import TransportNodeHid from '@ledgerhq/hw-transport-node-hid';
import Transport from '@ledgerhq/hw-transport';

( async () =&gt; {

    console.log('Unlock your ledger....');
    const transport = await TransportNodeHid.create();
    console.log(`Established connection with Ledger Nano S`);

    try {
        const hive = new Hive(transport);
        const {version, arbitraryData} = await hive.getAppConfiguration();
        console.log("Current version:", version);
        console.log("Arbitary data enabled:", arbitraryData);

        const publicKey = await hive.getPublicKey(`48'/13'/0'/0'/0'`);
        console.log("Public key:", publicKey);
    } catch (e) {
        console.error(e);
    }
    finally {
        transport.close();
    }

})();
```

## API

 * [getAppConfiguration](#getappconfiguration)
 * [getPublicKey](#getpublickey)
 * [signTransaction](#signtransaction) 

### getAppConfiguration

Get current configuration for HIVE App installed on a Ledger.

```typescript
async getAppConfiguration(): Promise&lt;{version: string, arbitraryData: boolean}&gt;
```

### getPublicKey

Retrieve public key from specified BIP32 path. You can set an additional parameter `confirm: boolean` which will ask the user to confirm the Public Key on his Ledger before returning it. 

```typescript
async getPublicKey(path: string, confirm?: boolean): Promise&lt;{publicKey: string}&gt; {
```

### signTransaction

Sign basic transactions with the specified key path. This method will return signed transactions (a transaction with additional `signatures` property). Please note that extensions are not yet supported for most transactions and operations (except `beneficiaries` for `comment_options`). 

```typescript
async signTransaction(tx: Transaction, path: string): Promise<SignedTransaction>
```

Please be aware that the current implementation of the HIVE Ledger App does not support multisig. This could be also a cool feature and we might add it someday. For now, let's focus on publishing it.

The library is open-source and available on Gitlab and NPM:
 * https://gitlab.com/engrave/ledger/ledger-app-hive

# Ledger Companion App

To prove that the application is working correctly, Ledger requires a sample Companion App. 

I prepared an initial design for a new wallet app and will start developing it soon. The plan is to make it as a wallet targeted at large stakeholders willing to invest in HIVE. It will be focused on governance (voting for witnesses and proposals) and the most significant chain news.

![It will be possible to create a new Hive account directly from app](https://files.peakd.com/file/peakd-hive/engrave/23wWk6s648pDWBsa1JoJunzjwiXRo9f49h5gbvBg2q65FmshLwjh7mpbHEcrqHRdQmJAg)

![Hive Ledger will display all significant parameters of your account](https://files.peakd.com/file/peakd-hive/engrave/23vsBhgnPDwTJcjG9YXJp5qfx6828bE9xVTzR6HsZW6XEskYJBs1bZoG99HkjsHBiau1W)

![It will be possible to vote on witnesses and perform other governance actions](https://files.peakd.com/file/peakd-hive/engrave/23wWnW3EENBacfW6UgsUncKqKVHKiQXRRNftBf1qpAp9GvXMJWu9x7ihqNU1wPktLyhdE)

Follow me to be up to date with incoming development updates!

***

<center>

**Click on the image to vote for @engrave witness:**

[![banner_engrave 100.png](https://images.hive.blog/DQmUghvic5TCPPvVkB4iB7eXmgQ3RQ4L8jkVizvuCBW8RMT/banner_engrave%20100.png)](https://hivesigner.com/sign/account-witness-vote?witness=engrave&amp;approve=1)


</center>
&lt;/div&gt;
<script crossorigin="anonymous" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://unpkg.com/steem-content-renderer"></script>
<!-- <script src="https://cdn.jsdelivr.net/npm/hive-content-renderer/dist/hive-content-renderer.min.js"></script> -->
<script>
  $(document).ready(function() {
    try {
      const renderer = new SteemContentRenderer.DefaultRenderer({
      // const renderer = new HiveContentRenderer({
        baseUrl: "https://hive.blog/",
        breaks: true,
        skipSanitization: false,
        allowInsecureScriptTags: false,
        addNofollowToLinks: true,
        doNotShowImages: false,
        ipfsPrefix: "",
        assetsWidth: 640,
        assetsHeight: 480,
        imageProxyFn: (url) => url,
        usertagUrlFn: (account) => "/@engrave",
        hashtagUrlFn: (hashtag) => "/javascript-library-for-ledger-nano-s-hive-application",
        isLinkSafeFn: (url) => true,
      });
      
      const inputElem = $('#content-engrave-javascript-library-for-ledger-nano-s-hive-application').html();
      const outputElem = $('#content-engrave-javascript-library-for-ledger-nano-s-hive-application');
      const output = renderer.render(inputElem);
      
      outputElem.html(output);
    } catch(e) {
      console.log(e);
    }
  });
</script>
<style>
  #content-engrave-javascript-library-for-ledger-nano-s-hive-application {
    padding: 0 3rem;
    color: #444444;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    font-size: 16px;
    line-height: 1.8;
    text-shadow: 0 1px 0 #ffffff;
    padding: 0.5rem;
  }
  #content-engrave-javascript-library-for-ledger-nano-s-hive-application code {
    background: white;
  }
  #content-engrave-javascript-library-for-ledger-nano-s-hive-application a {
    border-bottom: 1px solid #444444; color: #444444; text-decoration: none;
  }
  #content-engrave-javascript-library-for-ledger-nano-s-hive-application a:hover {
    border-bottom: 0;
  }
  #content-engrave-javascript-library-for-ledger-nano-s-hive-application h1 {
    font-size: 2.2em;
  }
  #content-engrave-javascript-library-for-ledger-nano-s-hive-application h2, h3, h4, h5 {
    margin-bottom: 0;
  }
  #content-engrave-javascript-library-for-ledger-nano-s-hive-application header small {
    color: #999;
    font-size: 50%;
  }
  #content-engrave-javascript-library-for-ledger-nano-s-hive-application img {
    max-width: 100%;
  }
</style>

<hr />
<p>
  See: <a href="https://peakd.com/hive-139531/@engrave/javascript-library-for-ledger-nano-s-hive-application">JavaScript library for Ledger Nano S HIVE application</a>
  by
  <a href="https://hive.blog/@engrave">@engrave</a>
</p>

</SignedTransaction></div>

  </div><a class="u-url" href="/howto/nano/nodejs/wallet/2021/03/02/javascript-library-for-ledger-nano-s-hive-application.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading"><a rel="author" href="/">Hive Chain Documentation</a></h2>
    
    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">site curated by: @inertia</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Your resource for various levels of Hive Documentation.</p>
      </div>
    </div>
  </div>

</footer>
</body>

</html>
